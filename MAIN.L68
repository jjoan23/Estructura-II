00001E56 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 01/01/2025 18:37:03

00000000                             1  *-----------------------------------------------------------------------------
00000000                             2  * Title      : MAIN
00000000                             3  * Written by :
00000000                             4  * Date       :
00000000                             5  * Description:
00000000                             6  *-----------------------------------------------------------------------------
00000000                             7  
00001000                             8              ORG    $1000
00001000                             9              
00001000                            10              INCLUDE 'CONST.X68'
00001000                            11  ; ----------------------------------------------------------------------------
00001000                            12  ; CONSTANTES DEL JUEGO
00001000                            13  ; ----------------------------------------------------------------------------
00001000                            14     
00001000                            15  ; --- CONSTANTES DE LA MANZANA -----------------------------------------------
00001000                            16  
00001000  =00000014                 17  MNZWIDTH    EQU     20                      ; ANCHURA DE LA MANZANA (a determinar)
00001000  =00000014                 18  MNZHEIGH    EQU     20                      ; ALTURA DE LA MANZANA (a determinar)
00001000  =0000AAFF                 19  MNZPCOL     EQU     $0000AAFF               ; COLOR CONTORNO MANZANA (a determinar)
00001000  =000000FF                 20  MNZFCOL     EQU     $000000FF               ; COLOR RELLENO MANZANA (a determinar)
00001000                            21  
00001000                            22  ; --- CONSTANTES DE LA SERPIENTE ---------------------------------------------
00001000                            23  
00001000  =00000001                 24  MAXSGM      EQU     1                       ; TAMAÑO MÁXIMO DE SEGMENTOS (a determinar)
00001000  =00000001                 25  LNGINI      EQU     1                       ; LONGITUD INICIAL SERPIENTE (a determinar)
00001000  =00000014                 26  CBZVEL      EQU     20                      ; VELOCIDAD DE LA CABEZA (a determinar)
00001000  =00000014                 27  SGMWIDTH    EQU     20                      ; ANCHURA DE UN SEGMENTO (PROVISIONAL)
00001000  =00000014                 28  SGMHEIGH    EQU     20                      ; ALTURA DE UN SEGMENTO (PROVISIONAL)
00001000  =0000FF00                 29  SGMPCOL     EQU     $0000FF00               ; COLOR CONTORNO SEGMENTO (PROVISIONAL)
00001000  =0000AA00                 30  SGMFCOL     EQU     $0000AA00               ; COLOR RELLENO SEGMENTO (PROVISIONAL)
00001000  =0000000A                 31  COLWIDTH    EQU     10                      ; ANCHURA DE LA COLA (PROVISIONAL)
00001000  =0000000A                 32  COLHEIGH    EQU     10                      ; ALTURA DE LA COLA (PROVISIONAL)
00001000  =0000FF00                 33  COLPCOL     EQU     $0000FF00               ; COLOR CONTORNO COLA (PROVISIONAL)
00001000  =0000AA00                 34  COLFCOL     EQU     $0000AA00               ; COLOR RELLENO COLA (PROVISIONAL)
00001000  =00000014                 35  CBZWIDTH    EQU     20                      ; ANCHURA DE LA CABEZA (PROVISIONAL)
00001000  =00000014                 36  CBZHEIGH    EQU     20                      ; ALTURA DE LA CABEZA (PROVISIONAL)
00001000  =0000FF00                 37  CBZPCOL     EQU     $0000FF00               ; COLOR CONTORNO CABEZA (PROVISIONAL)
00001000  =0000AA00                 38  CBZFCOL     EQU     $0000AA00               ; COLOR RELLENO CABEZA (PROVISIONAL)
00001000  =0000000A                 39  OJOWIDTH    EQU     10                      ; ANCHURA DE OJO DE SERPIENTE
00001000  =0000000A                 40  OJOHEIGH    EQU     10                      ; ALTURA DE OJO DE SERPIENTE
00001000  =00000000                 41  OJOPCOL     EQU     $00000000               ; COLOR CONTORNO OJO
00001000  =00FFFFFF                 42  OJOFCOL     EQU     $00FFFFFF               ; COLOR RELLENO OJO            
00001000                            43  
00001000                            44  ; --- CONSTANTES MARCADOR ----------------------------------------------------
00001000                            45  
00001000  =00000000                 46  PNTSFCOL    EQU     $00000000               ; COLOR FONDO MARCADOR (a determinar)
00001000  =00000065                 47  PNTSTEXT    EQU     0101                    ; COORDENADAS DEL MARCADOR (a determinar)
00001000                            48  
00001000                            49  ; --- CONSTANTES RELACIONADAS CON LOS ESTADOS --------------------------------
00001000                            50  
00001000  =FFFFFFFF                 51  STANONE     EQU     -1                      ; NÚMERO DE ESTADO NO EXISTENTE
00001000  =000001F4                 52  ISCMAXTM    EQU     500                     ;INTRO SCREEN WAITING CYCLES
00001000  =000001F4                 53  INSMAXTM    EQU     500                     ;INTRUCTIONS SCREEN WAINTING CYCLES
00001000                            54  
00001000                            55  
00001000                            56  
00001000                            57  
00001000                            58  -------------------- end include --------------------
00001000                            59              INCLUDE 'SYSCONST.X68'
00001000                            60  ; ----------------------------------------------------------------------------
00001000                            61  ; CONSTANTES DEL SISTEMA
00001000                            62  ; ----------------------------------------------------------------------------
00001000                            63  
00001000                            64  ; ---CONSTANTES DE LA PANTALLA------------------------------------------------
00001000                            65  
00001000  =00000280                 66  PANWIDTH    EQU     640                     ; ANCHO DE LA PANTALLA
00001000  =000001E0                 67  PANHEIGH    EQU     480                     ; ALTURA DE LA PANTALLA
00001000  =0090EE90                 68  COLFND      EQU     $90EE90                 ; COLOR DEL FONDO DE LA PANTALLA
00001000  =00000032                 69  SCRFPS      EQU     50
00001000                            70  
00001000                            71  ; ---CONSTANTES DE LA MATRIZ--------------------------------------------------
00001000                            72  
00001000  =00000014                 73  SIZECLDA    EQU     20                      ; TAMAÑO DE CADA CELDA EN PIXELES
00001000  =00000020                 74  NUMCLMNS    EQU     32                      ; COLUMNAS DE CELDAS (640/10)
00001000  =00000018                 75  NUMFILAS    EQU     24                      ; FILAS DE CELDAS (480/10)
00001000  =00000300                 76  TCELDAS     EQU     768                     ; TOTAL DE CELDAS (64 * 48)
00001000                            77  
00001000                            78  ; ---CÓDIGOS DE TECLADO-------------------------------------------------------
00001000                            79  
00001000  =00000025                 80  KBDLEFT     EQU     $25
00001000  =00000026                 81  KBDUP       EQU     $26
00001000  =00000027                 82  KBDRIGHT    EQU     $27
00001000  =00000028                 83  KBDDOWN     EQU     $28
00001000                            84  
00001000                            85  ; --- IDENTIFICADORES DE SONIDO ----------------------------------------------
00001000                            86  
00001000  =00000000                 87  SNDEAT      EQU     0
00001000  =00000001                 88  SNDGMOV     EQU     1
00001000                            89  
00001000                            90  ; --- NÚMEROS DE TRAP --------------------------------------------------------
00001000                            91  
00001000  =00000000                 92  SCRUPTN     EQU     0                       ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                 93  KBDUPTN     EQU     1                       ; KEYBOARD TRAP NUMBER
00001000  =00000002                 94  SNDPLTN     EQU     2                       ; SOUND TRAP NUMBER
00001000                            95  
00001000                            96  ; --- NÚMEROS DE INTERRUPCIÓN ------------------------------------------------
00001000                            97  
00001000  =00000001                 98  SCRINTN     EQU     1     
00001000                            99  
00001000                           100  
00001000                           101  
00001000                           102  
00001000                           103  
00001000                           104  
00001000                           105  -------------------- end include --------------------
00001000                           106              INCLUDE 'SYSTEM.X68'
00001000                           107   
00001000                           108   
00001000                           109  SYSINIT
00001000                           110  ; INICIA EL  SISTEMA
00001000                           111  ; INPUT    : NONE
00001000                           112  ; OUTPUT   : NONE
00001000                           113  ; MODIFIES : NONE
00001000                           114  ; ----------------------------------------------------------------------------
00001000                           115              
00001000  21FC 000010EC 0080       116              MOVE.L  #SCRPLOT,($80+SCRUPTN*4)
00001008  21FC 00001114 0084       117              MOVE.L  #KBDUPD,($80+KBDUPTN*4)
00001010  21FC 00001088 0088       118              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
00001018  21FC 000010DE 0064       119              MOVE.L  #SCRTIM,($60+SCRINTN*4)
00001020                           120              
00001020  4EB9 0000109A            121              JSR     SCRINIT
00001026  4EB9 00001106            122              JSR     KBDINIT
0000102C  4EB9 0000103A            123              JSR     SNDINIT
00001032                           124              
00001032  40E7                     125              MOVE.W  SR,-(A7)
00001034  0257 D8FF                126              ANDI.W  #$D8FF,(A7)
00001038                           127              
00001038  4E73                     128              RTE
0000103A                           129              
0000103A                           130  ; ----------------------------------------------------------------------------
0000103A                           131  SNDINIT
0000103A                           132  ; SOUND SYSTEM INIT
0000103A                           133  ; INPUT    : NONE
0000103A                           134  ; OUTPUT   : NONE
0000103A                           135  ; MODIFIES : NONE
0000103A                           136  ; ----------------------------------------------------------------------------
0000103A                           137  
0000103A  48E7 C0C0                138              MOVEM.L D0-D1/A0-A1,-(A7)
0000103E                           139  
0000103E  4201                     140              CLR.B   D1
00001040  41F9 0000107C            141              LEA     .SNDLIST,A0
00001046  2018                     142  .LOOP       MOVE.L  (A0)+,D0
00001048  6700 000E                143              BEQ     .DONE
0000104C  2240                     144              MOVE.L  D0,A1
0000104E  103C 0047                145              MOVE.B  #71,D0
00001052  4E4F                     146              TRAP    #15
00001054  5201                     147              ADDQ.B  #1,D1
00001056  60EE                     148              BRA     .LOOP
00001058                           149              
00001058  4CDF 0303                150  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
0000105C  4E75                     151              RTS
0000105E                           152              
0000105E= 53 4E 44 2F 45 41 ...    153  .SNDEAT     DC.B    'SND/EAT.wav',0
0000106A= 53 4E 44 2F 47 41 ...    154  .SNDGMOV    DC.B    'SND/GAMEOVER.wav',0
0000107C= 0000105E 0000106A ...    155  .SNDLIST    DC.L    .SNDEAT,.SNDGMOV,0
00001088                           156              
00001088                           157  ; ----------------------------------------------------------------------------
00001088                           158  SNDPLAY
00001088                           159  ; PLAY SOUND
00001088                           160  ; INPUT    : D7 SOUND ID
00001088                           161  ; OUTPUT   : NONE
00001088                           162  ; MODIFIES : NONE
00001088                           163  ; ----------------------------------------------------------------------------            
00001088                           164              
00001088  48A7 C000                165              MOVEM.W D0-D1,-(A7)
0000108C                           166              
0000108C  103C 0048                167              MOVE.B  #72,D0
00001090  1207                     168              MOVE.B  D7,D1
00001092  4E4F                     169              TRAP    #15
00001094                           170              
00001094  4C9F 0003                171              MOVEM.W (A7)+,D0-D1
00001098  4E73                     172              RTE
0000109A                           173               
0000109A                           174              
0000109A                           175  ; ----------------------------------------------------------------------------
0000109A                           176  SCRINIT
0000109A                           177  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
0000109A                           178  ; ENABLE DOUBLE BUFFER, ENABLED TIMED INTERRUPT.
0000109A                           179  ; INPUT    : NONE
0000109A                           180  ; OUTPUT   : NONE
0000109A                           181  ; MODIFIES : NONE
0000109A                           182  ; ----------------------------------------------------------------------------
0000109A                           183  
0000109A  48E7 C000                184              MOVEM.L D0-D1,-(A7)
0000109E                           185  
0000109E                           186              ; SET SCREEN RESOLUTION
0000109E  103C 0021                187              MOVE.B  #33,D0
000010A2  223C 028001E0            188              MOVE.L  #PANWIDTH<<16|PANHEIGH,D1
000010A8  4E4F                     189              TRAP    #15
000010AA                           190              
000010AA                           191              ; SET WINDOWED MODE
000010AA  7201                     192              MOVE.L  #1,D1
000010AC  4E4F                     193              TRAP    #15
000010AE                           194              
000010AE                           195              ; CLEAR SCREEN
000010AE  103C 000B                196              MOVE.B  #11,D0
000010B2  323C FF00                197              MOVE.W  #$FF00,D1
000010B6  4E4F                     198              TRAP    #15
000010B8                           199              
000010B8                           200              ; ENABLE DOUBLE BUFFER
000010B8  103C 005C                201              MOVE.B  #92,D0
000010BC  123C 0011                202              MOVE.B  #17,D1
000010C0  4E4F                     203              TRAP    #15
000010C2                           204              
000010C2                           205              ; ENABLE TIMED INTERRUPT
000010C2  103C 0020                206              MOVE.B  #32,D0
000010C6  123C 0006                207              MOVE.B  #6,D1
000010CA  143C 0081                208              MOVE.B  #$80|SCRINTN,D2
000010CE  7614                     209              MOVE.L  #1000/SCRFPS,D3                  ; CON 20 SE CONSIUGUEN 50 FPS
000010D0  4E4F                     210              TRAP    #15
000010D2                           211              
000010D2                           212              ; CLEAR INTERRUPT COUNTER
000010D2  4279 000021B4            213              CLR.W   (SCRINTCT)
000010D8                           214              
000010D8  4CDF 0003                215              MOVEM.L (A7)+,D0-D1
000010DC                           216              
000010DC  4E75                     217              RTS    
000010DE                           218              
000010DE                           219  ; ------------------------------------------------------------------------------
000010DE                           220  SCRTIM
000010DE                           221  ; TIMED INTERRUPT SERVICE ROUTINE
000010DE                           222  ; INPUT    : NONE
000010DE                           223  ; OUTPUT   : NONE
000010DE                           224  ; MODIFIES : NONE
000010DE                           225  ; ------------------------------------------------------------------------------
000010DE  5239 000021B4            226              ADDQ.B  #1,(SCRINTCT)
000010E4  5239 000021B5            227              ADDQ.B  #1,(SCRCYCCT)
000010EA  4E73                     228              RTE
000010EC                           229              
000010EC                           230  
000010EC                           231  ; ------------------------------------------------------------------------------
000010EC                           232  SCRPLOT
000010EC                           233  ; UPDATES DOUBLE BUFFER
000010EC                           234  ; INPUT    : NONE
000010EC                           235  ; OUTPUT   : NONE
000010EC                           236  ; MODIFIES : NONE
000010EC                           237  ; ------------------------------------------------------------------------------
000010EC                           238  
000010EC  48A7 C000                239              MOVEM.W D0-D1,-(A7)
000010F0                           240              
000010F0                           241              ; SWITCH BUFFERS
000010F0  103C 005E                242              MOVE.B  #94,D0
000010F4  4E4F                     243              TRAP    #15
000010F6                           244              
000010F6                           245              ; CLEAR HIDDEN BUFFER
000010F6  103C 000B                246              MOVE.B  #11,D0
000010FA  323C FF00                247              MOVE.W  #$FF00,D1
000010FE  4E4F                     248              TRAP    #15
00001100                           249              
00001100  4C9F 0003                250              MOVEM.W (A7)+,D0-D1
00001104                           251              
00001104  4E73                     252              RTE
00001106                           253          
00001106                           254  ; ------------------------------------------------------------------------------
00001106                           255  KBDINIT
00001106                           256  ; INIT KEYBOARD
00001106                           257  ; INPUT    : NONE
00001106                           258  ; OUTPUT   : NONE
00001106                           259  ; MODIFIES : NONE
00001106                           260  ; ------------------------------------------------------------------------------
00001106                           261  
00001106  4239 000021AD            262              CLR.B   (KBDVAL)
0000110C  4239 000021AE            263              CLR.B   (KBDEDGE)
00001112  4E75                     264              RTS
00001114                           265  
00001114                           266  ; ------------------------------------------------------------------------------
00001114                           267  KBDUPD
00001114                           268  ; UPDATE KEYBOARD INFO.  
00001114                           269  ; 7 -> PAUSE
00001114                           270  ; 6 -> FIRE 3
00001114                           271  ; 5 -> FIRE 2
00001114                           272  ; 4 -> FIRE 1
00001114                           273  ; 3 -> DOWN
00001114                           274  ; 2 -> RIGHT
00001114                           275  ; 1 -> UP
00001114                           276  ; 0 -> LEFT
00001114                           277  ; INPUT    : NONE
00001114                           278  ; OUTPUT   : NONE
00001114                           279  ; MODIFIES : NONE
00001114                           280  ; ------------------------------------------------------------------------------
00001114                           281  
00001114  48E7 C000                282              MOVEM.L D0-D1,-(A7)
00001118                           283  
00001118                           284              ; LEE ESTADO DEL TECLADO
00001118  103C 0013                285              MOVE.B  #19,D0
0000111C  223C 25262728            286              MOVE.L  #KBDLEFT<<24|KBDUP<<16|KBDRIGHT<<8|KBDDOWN,D1
00001122  4E4F                     287              TRAP    #15                  ; Lee las teclas y guarda en D1
00001124                           288              
00001124  23C1 000021AE            289              MOVE.L  D1,(KBDEDGE)
0000112A                           290  
0000112A  B2BC 000000FF            291              CMP.L   #$000000FF,D1
00001130  6700 0048                292              BEQ     DWN
00001134  B2BC 0000FF00            293              CMP.L   #$0000FF00,D1
0000113A  6700 001A                294              BEQ     DER
0000113E  B2BC 00FF0000            295              CMP.L   #$00FF0000,D1
00001144  6700 001C                296              BEQ     ARR
00001148  B2BC FF000000            297              CMP.L   #$FF000000,D1
0000114E  6700 001E                298              BEQ     IZQ
00001152                           299  
00001152                           300              ; Si no hay pulsaciones, mantener estado
00001152  6000 002E                301              BRA     CONTINU
00001156                           302  
00001156  33FC 0000 000021AC       303  DER:        MOVE.W  #0,(ESTDCBZ)           ; Actualiza estado a DERECHA
0000115E  6000 0022                304              BRA     CONTINU
00001162                           305              
00001162  33FC 0001 000021AC       306  ARR:        MOVE.W  #1,(ESTDCBZ)           ; Actualiza estado a ARRIBA
0000116A  6000 0016                307              BRA     CONTINU
0000116E                           308  
0000116E  33FC 0002 000021AC       309  IZQ:        MOVE.W  #2,(ESTDCBZ)           ; Actualiza estado a IZQUIERDA
00001176  6000 000A                310              BRA     CONTINU                    
0000117A                           311  
0000117A  33FC 0003 000021AC       312  DWN:        MOVE.W  #3,(ESTDCBZ)           ; Actualiza estado a ABAJO
00001182                           313  
00001182                           314  CONTINU:
00001182  4CDF 0003                315              MOVEM.L (A7)+,D0-D1
00001186  4E73                     316              RTE
00001188                           317   
00001188                           318  -------------------- end include --------------------
00001188                           319              INCLUDE 'LIB/UTLCODE.X68'
00001188                           320  ; =============================================================================
00001188                           321  ; UTILITY CODE
00001188                           322  ; =============================================================================
00001188                           323  
00001188                           324  ; -----------------------------------------------------------------------------
00001188                           325  UTLINIT
00001188                           326  ; INITIALIZES UTILITY CODE
00001188                           327  ; INPUT    - NONE
00001188                           328  ; OUTPUT   - NONE
00001188                           329  ; MODIFIES - NONE
00001188                           330  ; -----------------------------------------------------------------------------
00001188  48E7 C000                331              MOVEM.L D0-D1,-(A7)
0000118C  103C 0008                332              MOVE.B  #8,D0
00001190  4E4F                     333              TRAP    #15
00001192  13C1 00001EAA            334              MOVE.B  D1,(UTLRNDIX)
00001198  4CDF 0003                335              MOVEM.L (A7)+,D0-D1
0000119C  4E75                     336              RTS
0000119E                           337  
0000119E                           338  
0000119E                           339  ; -----------------------------------------------------------------------------
0000119E                           340  UTLPRINT
0000119E                           341  ; PRINT SCREEN CENTERED TEXT
0000119E                           342  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000119E                           343  ;            D0.B SCREEN ROW TO PRINT TEXT
0000119E                           344  ; OUTPUT   : D0.B NEXT ROW
0000119E                           345  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000119E                           346  ; -----------------------------------------------------------------------------
0000119E  48E7 C0C0                347              MOVEM.L D0-D1/A0-A1,-(A7)
000011A2  4201                     348              CLR.B   D1
000011A4  2248                     349              MOVE.L  A0,A1
000011A6  4A18                     350  .LOOP       TST.B   (A0)+
000011A8  6700 0006                351              BEQ     .ENDLOOP
000011AC  5201                     352              ADDQ.B  #1,D1
000011AE  60F6                     353              BRA     .LOOP
000011B0  E209                     354  .ENDLOOP    LSR.B   #1,D1
000011B2  0401 0028                355              SUB.B   #(PANWIDTH/UTLCHRWD)/2,D1
000011B6  4401                     356              NEG.B   D1
000011B8  E141                     357              ASL.W   #8,D1
000011BA  8240                     358              OR.W    D0,D1
000011BC  103C 000B                359              MOVE.B  #11,D0
000011C0  4E4F                     360              TRAP    #15
000011C2  103C 000D                361              MOVE.B  #13,D0
000011C6  4E4F                     362              TRAP    #15
000011C8  4CDF 0303                363              MOVEM.L (A7)+,D0-D1/A0-A1
000011CC  5200                     364              ADDQ.B  #1,D0
000011CE  4E75                     365              RTS
000011D0                           366              
000011D0                           367              
000011D0                           368  
000011D0                           369  
000011D0                           370              ; (SCRWIDTH/UTLCHRWD)/2 - D1/2
000011D0                           371  
000011D0                           372  ; -----------------------------------------------------------------------------
000011D0                           373  UTLRAND
000011D0                           374  ; PROVIDES A PSEUDO-RANDOM BYTE
000011D0                           375  ; INPUT    - NONE
000011D0                           376  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
000011D0                           377  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011D0                           378  ; -----------------------------------------------------------------------------
000011D0  2F08                     379              MOVE.L  A0,-(A7)
000011D2  41F9 000011EE            380              LEA     .RANDVEC,A0
000011D8  4280                     381              CLR.L   D0
000011DA  1039 00001EAA            382              MOVE.B  (UTLRNDIX),D0
000011E0  1030 0800                383              MOVE.B  (A0,D0.L),D0
000011E4  5239 00001EAA            384              ADDQ.B  #1,(UTLRNDIX)
000011EA  205F                     385              MOVE.L  (A7)+,A0
000011EC  4E75                     386              RTS
000011EE                           387  
000011EE                           388  
000011EE= A2 EE 9A 0C F5 24 ...    389  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
000011F6= 2A A3 51 26 E0 AC ...    390              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
000011FE= 75 51 CA FD 33 EB ...    391              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
00001206= 60 CC E7 B8 9A EB ...    392              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
0000120E= 1D 76 B5 95 B0 89 ...    393              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
00001216= 39 15 48 C9 6E CA ...    394              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
0000121E= 43 E7 E2 7C 37 25 ...    395              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
00001226= E9 94 CE E9 E4 52 ...    396              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
0000122E= 37 6D 9A 84 A2 28 ...    397              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
00001236= 19 E2 C6 77 80 D4 ...    398              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
0000123E= 0A 5A 32 67 33 C2 ...    399              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
00001246= 59 80 DC 0E 57 FC ...    400              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
0000124E= 8A AB BC F7 07 4D ...    401              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001256= EF D5 77 6E 1E BB ...    402              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
0000125E= D6 E0 2A 8F BD 28 ...    403              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001266= 13 4F 66 EC 0A 64 ...    404              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
0000126E= 56 52 9A 16 9B 90 ...    405              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001276= 06 8A A4 F7 01 DA ...    406              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
0000127E= F2 E7 77 28 B1 76 ...    407              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001286= A4 42 E3 81 B1 67 ...    408              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000128E= BF CE FA 16 BF 38 ...    409              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001296= D1 8B 50 0C 5F 49 ...    410              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000129E= DE 4C 14 A2 40 DC ...    411              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
000012A6= B6 9B 0A 38 5D AB ...    412              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
000012AE= E2 1B DD 75 15 82 ...    413              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
000012B6= 8A 26 51 30 9F 47 ...    414              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
000012BE= 1E 8A BB 71 C6 6E ...    415              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
000012C6= 9F 47 E5 34 94 27 ...    416              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
000012CE= 7D 06 D6 BA 30 0F ...    417              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
000012D6= EC 7F 7E 03 CF 2D ...    418              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
000012DE= 94 5B 23 F2 8B CD ...    419              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
000012E6= 74 33 EC B9 0F D5 ...    420              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
000012EE                           421  
000012EE                           422  
000012EE                           423  -------------------- end include --------------------
000012EE                           424              INCLUDE 'LIB/UTLCONST.X68'
000012EE                           425  ; ==============================================================================
000012EE                           426  ; UTIL CONSTANTS
000012EE                           427  ; ==============================================================================
000012EE                           428  
000012EE  =00000008                429  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
000012EE  =00000008                430  -------------------- end include --------------------
000012EE                           431              INCLUDE 'HEADSRP.X68'
000012EE                           432  
000012EE                           433  ; ------------------------------------------------------------------------------
000012EE                           434  HEADINIT
000012EE                           435  ; INICIALIZAR CABEZA.
000012EE                           436  ; INPUT    : NONE 
000012EE                           437  ; OUTPUT   : NONE
000012EE                           438  ; MODIFIES : NONE
000012EE                           439  ; ------------------------------------------------------------------------------
000012EE  33FC 0140 00001E8A       440              MOVE.W  #PANWIDTH/2,(CBZPOSX)
000012F6  33FC 00F0 00001E8C       441              MOVE.W  #PANHEIGH/2,(CBZPOSY)
000012FE  4279 000021AC            442              CLR.W   (ESTDCBZ)
00001304  33FC 0000 000021AC       443              MOVE.W  #0,(ESTDCBZ)
0000130C  4E75                     444              RTS
0000130E                           445              
0000130E                           446  ; ------------------------------------------------------------------------------
0000130E                           447  HEADUPD
0000130E                           448  ; ACTUALIZAR CABEZA.
0000130E                           449  ; INPUT    : NONE 
0000130E                           450  ; OUTPUT   : NONE
0000130E                           451  ; MODIFIES : NONE
0000130E                           452  ; ------------------------------------------------------------------------------
0000130E                           453  
0000130E  48A7 E100                454              MOVEM.W D0-D2/D7,-(A7)
00001312                           455  
00001312                           456              ; Marcar celda actual como vacía
00001312  3239 00001E8A            457              MOVE.W  (CBZPOSX),D1
00001318  3439 00001E8C            458              MOVE.W  (CBZPOSY),D2
0000131E  4EB9 0000187C            459              JSR     CINDMTRZ
00001324  4EB9 000018CC            460              JSR     MCLDVCIA
0000132A                           461              
0000132A                           462              ; Actualiza la posición de la cabeza según ESTDCBZ
0000132A  3039 000021AC            463              MOVE.W  (ESTDCBZ),D0
00001330  B07C 0000                464              CMP.W   #0,D0
00001334  6700 001E                465              BEQ     SIGDER
00001338  B07C 0001                466              CMP.W   #1,D0
0000133C  6700 0022                467              BEQ     SIGARR
00001340  B07C 0002                468              CMP.W   #2,D0
00001344  6700 0026                469              BEQ     SIGIZQ
00001348  B07C 0003                470              CMP.W   #3,D0
0000134C  6700 002A                471              BEQ     SIGABA
00001350                           472  
00001350                           473              ; Si no hay dirección válida, sale
00001350  6000 00B6                474              BRA     FIN
00001354                           475  
00001354                           476  SIGDER:
00001354  0679 0014 00001E8A       477              ADD.W   #CBZVEL,(CBZPOSX)
0000135C  6000 0022                478              BRA     CHKBORDE
00001360                           479  
00001360                           480  SIGARR:
00001360  0479 0014 00001E8C       481              SUB.W   #CBZVEL,(CBZPOSY)
00001368  6000 0016                482              BRA     CHKBORDE
0000136C                           483  
0000136C                           484  SIGIZQ:
0000136C  0479 0014 00001E8A       485              SUB.W   #CBZVEL,(CBZPOSX)
00001374  6000 000A                486              BRA     CHKBORDE
00001378                           487  
00001378                           488  SIGABA:
00001378  0679 0014 00001E8C       489              ADD.W   #CBZVEL,(CBZPOSY)
00001380                           490              
00001380                           491  CHKBORDE:
00001380                           492              ; Verificar colisiones con los bordes
00001380  3239 00001E8A            493              MOVE.W  (CBZPOSX),D1
00001386  B27C 0280                494              CMP.W   #PANWIDTH,D1                 ; Si CBZPOSX < 0
0000138A  6E00 006E                495              BGT     GAMEOVER
0000138E  B27C 0000                496              CMP.W   #0,D1          ; Si CBZPOSX >= PANWIDTH
00001392  6D00 0066                497              BLT     GAMEOVER
00001396                           498  
00001396  3239 00001E8C            499              MOVE.W  (CBZPOSY),D1
0000139C  B27C 0000                500              CMP.W   #0,D1                 ; Si CBZPOSY < 0
000013A0  6D00 0058                501              BLT     GAMEOVER
000013A4  B27C 01E0                502              CMP.W   #PANHEIGH,D1          ; Si CBZPOSY >= PANHEIGH
000013A8  6E00 0050                503              BGT     GAMEOVER
000013AC                           504  
000013AC                           505              ;BRA     FIN
000013AC                           506              
000013AC                           507  CHKCOL:
000013AC                           508              ; Verifica la colisión con la manzana
000013AC  3239 00001E8A            509              MOVE.W  (CBZPOSX),D1
000013B2  3439 00001E8C            510              MOVE.W  (CBZPOSY),D2
000013B8  B279 00001E86            511              CMP.W   (MNZPOSX),D1
000013BE  6600 001E                512              BNE     NOCOL
000013C2  B479 00001E88            513              CMP.W   (MNZPOSY),D2
000013C8  6600 0014                514              BNE     NOCOL
000013CC                           515              
000013CC                           516              ; Colisión detectada
000013CC  4EB9 00001664            517              JSR     APPLEUPD
000013D2  4EB9 0000175A            518              JSR     SCOUPD
000013D8  1E3C 0000                519              MOVE.B  #SNDEAT,D7
000013DC  4E42                     520              TRAP    #SNDPLTN
000013DE                           521  
000013DE                           522  NOCOL:
000013DE                           523              ; Convierte la posición nueva a índice
000013DE  3239 00001E8A            524              MOVE.W  (CBZPOSX),D1
000013E4  3439 00001E8C            525              MOVE.W  (CBZPOSY),D2
000013EA  4EB9 0000187C            526              JSR     CINDMTRZ
000013F0  4EB9 000018B6            527              JSR     CBZOCPD                 ; Marca la celda como ocupada
000013F6                           528              
000013F6  6000 0010                529              BRA     FIN
000013FA                           530  
000013FA                           531  
000013FA                           532  GAMEOVER:
000013FA  1E3C 0001                533              MOVE.B  #SNDGMOV,D7             ;PONER SONIDO GAME OVER
000013FE  4E42                     534              TRAP    #SNDPLTN
00001400  33FC 0003 00001EA8       535              MOVE.W  #3,(STANEXT)
00001408                           536  
00001408                           537  FIN:
00001408  4C9F 0087                538              MOVEM.W (A7)+,D0-D2/D7
0000140C                           539  
0000140C  4E75                     540              RTS
0000140E                           541              
0000140E                           542  ; ------------------------------------------------------------------------------
0000140E                           543  HEADPLOT
0000140E                           544  ; DIBUJAR CABEZA.
0000140E                           545  ; INPUT    : NONE 
0000140E                           546  ; OUTPUT   : NONE
0000140E                           547  ; MODIFIES : NONE
0000140E                           548  ; ------------------------------------------------------------------------------
0000140E                           549                         
0000140E  3F00                     550              MOVE.W  D0,-(A7)               ; GUARDAMOS D0
00001410  3003                     551              MOVE.W  D3,D0                  ; PONEMOS EL INDICE DE LA CELDA EN D0 PARA CALCULAR SUS COORDENADAS
00001412  4EB9 00001924            552              JSR     CNVICOOR
00001418  2F01                     553              MOVE.L  D1,-(A7)
0000141A                           554              
0000141A                           555              ; SET COLOR DEL CONTORNO CABEZA
0000141A  103C 0050                556              MOVE.B  #80,D0
0000141E  223C 0000FF00            557              MOVE.L  #CBZPCOL,D1
00001424  4E4F                     558              TRAP    #15
00001426                           559              
00001426                           560              ; SET COLOR DEL RELLENO CABEZA
00001426  103C 0051                561              MOVE.B  #81,D0
0000142A  223C 0000AA00            562              MOVE.L  #CBZFCOL,D1
00001430  4E4F                     563              TRAP    #15
00001432                           564              
00001432                           565              ; DIBUJAR CABEZA
00001432  103C 0057                566              MOVE.B  #87,D0
00001436  221F                     567              MOVE.L  (A7)+,D1
00001438  3F03                     568              MOVE.W  D3,-(A7)
0000143A  3601                     569              MOVE.W  D1,D3
0000143C  0643 0014                570              ADD.W   #CBZWIDTH,D3
00001440  3802                     571              MOVE.W  D2,D4
00001442  0644 0014                572              ADD.W   #CBZHEIGH,D4
00001446  4E4F                     573              TRAP    #15
00001448                           574              
00001448  2F01                     575              MOVE.L  D1,-(A7)
0000144A                           576              
0000144A                           577              ; SET COLOR DEL CONTORNO OJO
0000144A  103C 0050                578              MOVE.B  #80,D0
0000144E  7200                     579              MOVE.L  #OJOPCOL,D1
00001450  4E4F                     580              TRAP    #15
00001452                           581              
00001452                           582              ; SET COLOR DEL RELLENO OJO
00001452  103C 0051                583              MOVE.B  #81,D0
00001456  223C 00FFFFFF            584              MOVE.L  #OJOFCOL,D1
0000145C  4E4F                     585              TRAP    #15
0000145E                           586              
0000145E                           587              ; DIBUJAR OJO
0000145E  103C 0058                588              MOVE.B  #88,D0
00001462  221F                     589              MOVE.L  (A7)+,D1
00001464  2F01                     590              MOVE.L  D1,-(A7)
00001466  2F02                     591              MOVE.L  D2,-(A7)
00001468  5A41                     592              ADD.W   #OJOWIDTH/2,D1            
0000146A  3601                     593              MOVE.W  D1,D3
0000146C  0643 000A                594              ADD.W   #OJOWIDTH,D3
00001470  5A42                     595              ADD.W   #OJOHEIGH/2,D2
00001472  3802                     596              MOVE.W  D2,D4
00001474  0644 000A                597              ADD.W   #OJOHEIGH,D4
00001478  4E4F                     598              TRAP    #15                     ; DIBUJAMOS EL PRIMER OJO
0000147A                           599              
0000147A                           600  
0000147A                           601              ; DEFINIR COORDENADAS IRIS
0000147A  241F                     602              MOVE.L  (A7)+,D2
0000147C  221F                     603              MOVE.L  (A7)+,D1
0000147E  0641 000A                604              ADD.W   #OJOWIDTH,D1
00001482  0642 000A                605              ADD.W   #OJOHEIGH,D2
00001486  103C 0052                606              MOVE.B  #82,D0
0000148A  4E4F                     607              TRAP    #15                     ; DIBUJAMOS EL PRIMER IRIS
0000148C                           608              
0000148C  361F                     609              MOVE.W  (A7)+,D3
0000148E  301F                     610              MOVE.W  (A7)+,D0
00001490                           611  
00001490  4E75                     612              RTS
00001492                           613  
00001492                           614  
00001492                           615  
00001492                           616  
00001492                           617  
00001492                           618  -------------------- end include --------------------
00001492                           619              INCLUDE 'SEGSRP.X68'
00001492                           620  
00001492                           621  ; ------------------------------------------------------------------------------
00001492                           622  SEGINIT
00001492                           623  ; INICIALIZAR SEGMENTO.
00001492                           624  ; INPUT    : NONE 
00001492                           625  ; OUTPUT   : NONE
00001492                           626  ; MODIFIES : NONE
00001492                           627  ; ------------------------------------------------------------------------------
00001492  33FC 012C 00001E96       628              MOVE.W  #(PANWIDTH/2)-CBZWIDTH,(SGMPOSX)
0000149A  33FC 00F0 00001E98       629              MOVE.W  #PANHEIGH/2,(SGMPOSY)
000014A2  33F9 00001E96 00001E9A   630              MOVE.W  (SGMPOSX),(SGMPOSX2)
000014AC  33F9 00001E98 00001E9C   631              MOVE.W  (SGMPOSY),(SGMPOSY2)
000014B6  0479 0014 00001E9A       632              SUB.W   #SGMWIDTH,(SGMPOSX2)
000014BE  4E75                     633              RTS
000014C0                           634              
000014C0                           635  ; ------------------------------------------------------------------------------
000014C0                           636  SEGUPD
000014C0                           637  ; ACTUALIZAR SEGMENTO.
000014C0                           638  ; INPUT    : NONE 
000014C0                           639  ; OUTPUT   : NONE
000014C0                           640  ; MODIFIES : NONE
000014C0                           641  ; ------------------------------------------------------------------------------
000014C0                           642  
000014C0  48A7 6000                643              MOVEM.W D1-D2,-(A7)
000014C4                           644              
000014C4                           645              ; Marcar posición anterior del segmento como vacía
000014C4  3239 00001E96            646              MOVE.W  (SGMPOSX),D1             ; Cargar posición X actual del segmento2
000014CA  3439 00001E98            647              MOVE.W  (SGMPOSY),D2             ; Cargar posición Y actual del segmento2
000014D0  4EB9 0000187C            648              JSR     CINDMTRZ                ; Obtener índice de celda en D0
000014D6  4EB9 000018CC            649              JSR     MCLDVCIA                ; Marcar celda como vacía
000014DC                           650              
000014DC                           651              ; Marcar posición anterior del segmento como vacía
000014DC  3239 00001E9A            652              MOVE.W  (SGMPOSX2),D1             ; Cargar posición X actual del segmento2
000014E2  3439 00001E9C            653              MOVE.W  (SGMPOSY2),D2             ; Cargar posición Y actual del segmento2
000014E8  4EB9 0000187C            654              JSR     CINDMTRZ                ; Obtener índice de celda en D0
000014EE  4EB9 000018CC            655              JSR     MCLDVCIA                ; Marcar celda como vacía
000014F4                           656              
000014F4                           657              ; Actualizar posición del segmento para seguir a la cabeza
000014F4  33F9 00001E96 00001E9A   658              MOVE.W  (SGMPOSX),(SGMPOSX2)    ; MARCAMOS LOS SEGMENTOS COMO SEGUNDA COORDENADA X
000014FE  33F9 00001E98 00001E9C   659              MOVE.W  (SGMPOSY),(SGMPOSY2)    ; MARCAMOS LOS SEGMENTOS COMO SEGUNDA COORDENADA Y
00001508  33F9 00001E8A 00001E96   660              MOVE.W  (CBZPOSX),(SGMPOSX)        ; Actualizar X del segmento con la X de la cabeza
00001512  33F9 00001E8C 00001E98   661              MOVE.W  (CBZPOSY),(SGMPOSY)        ; Actualizar Y del segmento con la Y de la cabeza
0000151C                           662  
0000151C                           663              ; Marcar nueva posición del segmento como ocupada
0000151C  3239 00001E96            664              MOVE.W  (SGMPOSX),D1             ; Cargar nueva posición X
00001522  3439 00001E98            665              MOVE.W  (SGMPOSY),D2             ; Cargar nueva posición Y
00001528  4EB9 0000187C            666              JSR     CINDMTRZ                ; Obtener índice de celda en D0
0000152E  4EB9 000018E2            667              JSR     SGMOCPD                 ; Marcar celda como ocupada por segmento
00001534                           668              
00001534  3239 00001E9A            669              MOVE.W  (SGMPOSX2),D1             ; Cargar nueva posición X DEL SEGMENTO 2
0000153A  3439 00001E9C            670              MOVE.W  (SGMPOSY2),D2             ; Cargar nueva posición Y DEL SEGMENTO 2
00001540  4EB9 0000187C            671              JSR     CINDMTRZ                ; Obtener índice de celda en D0
00001546  4EB9 000018E2            672              JSR     SGMOCPD                 ; Marcar celda como ocupada por segmento
0000154C                           673              
0000154C  4C9F 0006                674              MOVEM.W (A7)+,D1-D2            
00001550  4E75                     675              RTS
00001552                           676  ;CODIGO ANTIGUO
00001552                           677              
00001552                           678              
00001552                           679              
00001552                           680  ; ------------------------------------------------------------------------------
00001552                           681  SEGPLOT
00001552                           682  ; DIBUJAR SEGMENTO.
00001552                           683  ; INPUT    : NONE 
00001552                           684  ; OUTPUT   : NONE
00001552                           685  ; MODIFIES : NONE
00001552                           686  ; ------------------------------------------------------------------------------
00001552  3F00                     687              MOVE.W  D0,-(A7)
00001554  3003                     688              MOVE.W  D3,D0
00001556  4EB9 00001924            689              JSR     CNVICOOR
0000155C  2F01                     690              MOVE.L  D1,-(A7)
0000155E                           691              
0000155E  103C 0050                692              MOVE.B  #80,D0
00001562  223C 0000FF00            693              MOVE.L  #SGMPCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL CONTORNO DEL SEGMENTO
00001568  4E4F                     694              TRAP    #15
0000156A                           695              
0000156A  103C 0051                696              MOVE.B  #81,D0
0000156E  223C 0000AA00            697              MOVE.L  #SGMFCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL RELLENO DEL SEGMENTO
00001574  4E4F                     698              TRAP    #15
00001576                           699              
00001576  103C 0057                700              MOVE.B  #87,D0
0000157A  221F                     701              MOVE.L  (A7)+,D1
0000157C  3F03                     702              MOVE.W  D3,-(A7)
0000157E  3601                     703              MOVE.W  D1,D3
00001580  0643 0014                704              ADD.W   #SIZECLDA,D3
00001584  3802                     705              MOVE.W  D2,D4                    ; DIBUJAMOS EL CUADRADO
00001586  0644 0014                706              ADD.W   #SIZECLDA,D4
0000158A  4E4F                     707              TRAP    #15                     
0000158C                           708                          
0000158C  361F                     709              MOVE.W  (A7)+,D3  
0000158E  301F                     710              MOVE.W  (A7)+,D0
00001590                           711  
00001590  4E75                     712              RTS
00001592                           713  
00001592                           714  -------------------- end include --------------------
00001592                           715              INCLUDE 'TAILSRP.X68'
00001592                           716     
00001592                           717  ; ------------------------------------------------------------------------------
00001592                           718  TAILINIT
00001592                           719  ; INICIALIZAR COLA.
00001592                           720  ; INPUT    : NONE 
00001592                           721  ; OUTPUT   : NONE
00001592                           722  ; MODIFIES : NONE
00001592                           723  ; ------------------------------------------------------------------------------
00001592                           724  
00001592  33FC 011D 00001E92       725              MOVE.W  #(PANWIDTH/2)-CBZWIDTH-SGMWIDTH+(COLWIDTH/2),(COLPOSX)
0000159A  33FC 00F0 00001E94       726              MOVE.W  #(PANHEIGH/2),(COLPOSY)
000015A2                           727              
000015A2  4E75                     728              RTS
000015A4                           729              
000015A4                           730              
000015A4                           731  ; ------------------------------------------------------------------------------
000015A4                           732  TAILUPD
000015A4                           733  ; ACTUALIZAR COLA.
000015A4                           734  ; INPUT    : NONE 
000015A4                           735  ; OUTPUT   : NONE
000015A4                           736  ; MODIFIES : NONE
000015A4                           737  ; ------------------------------------------------------------------------------
000015A4  48A7 6000                738              MOVEM.W D1-D2,-(A7)
000015A8                           739              
000015A8                           740              ; Marca la posición actual de la cola como vacía
000015A8  3239 00001E92            741              MOVE.W  (COLPOSX),D1
000015AE  3439 00001E94            742              MOVE.W  (COLPOSY),D2
000015B4  4EB9 0000187C            743              JSR     CINDMTRZ
000015BA  4EB9 000018CC            744              JSR     MCLDVCIA
000015C0                           745              ; Actualiza la posición de la cola para seguir al último segmento
000015C0  33F9 00001E9A 00001E92   746              MOVE.W  (SGMPOSX2),(COLPOSX)
000015CA  33F9 00001E9C 00001E94   747              MOVE.W  (SGMPOSY2),(COLPOSY)    ; MARCAMOS LA COOORDENADA DE LA COLA COMO COORDENADA DEL SEGMENTO 2
000015D4                           748              ; Marca la nueva posición como cola
000015D4  3239 00001E92            749              MOVE.W  (COLPOSX),D1
000015DA  3439 00001E94            750              MOVE.W  (COLPOSY),D2
000015E0  4EB9 0000187C            751              JSR     CINDMTRZ
000015E6  4EB9 000018F8            752              JSR     COLOCPD
000015EC                           753  
000015EC                           754  FINUPD
000015EC  4C9F 0006                755              MOVEM.W (A7)+,D1-D2
000015F0  4E75                     756              RTS
000015F2                           757              
000015F2                           758  ; ------------------------------------------------------------------------------
000015F2                           759  TAILPLOT
000015F2                           760  ; DIBUJAR COLA
000015F2                           761  ; INPUT    : NONE 
000015F2                           762  ; OUTPUT   : NONE
000015F2                           763  ; MODIFIES : NONE
000015F2                           764  ; ------------------------------------------------------------------------------
000015F2                           765  
000015F2  3F00                     766              MOVE.W  D0,-(A7)
000015F4  3003                     767              MOVE.W  D3,D0
000015F6  4EB9 00001924            768              JSR     CNVICOOR
000015FC  2F01                     769              MOVE.L  D1,-(A7)
000015FE                           770              
000015FE  103C 0050                771              MOVE.B  #80,D0
00001602  223C 0000FF00            772              MOVE.L  #COLPCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL CONTORNO DE LA COLA
00001608  4E4F                     773              TRAP    #15
0000160A                           774              
0000160A  103C 0051                775              MOVE.B  #81,D0
0000160E  223C 0000AA00            776              MOVE.L  #COLFCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL RELLENO DE LA COLA
00001614  4E4F                     777              TRAP    #15
00001616                           778              
00001616  103C 0057                779              MOVE.B  #87,D0
0000161A  221F                     780              MOVE.L  (A7)+,D1
0000161C  3F03                     781              MOVE.W  D3,-(A7)
0000161E  3601                     782              MOVE.W  D1,D3
00001620  0643 0014                783              ADD.W   #SIZECLDA,D3
00001624  3802                     784              MOVE.W  D2,D4                    
00001626  0644 0014                785              ADD.W   #SIZECLDA,D4
0000162A  4E4F                     786              TRAP    #15                    ; DIBUJAMOS EL CUADRADO 
0000162C                           787                          
0000162C  361F                     788              MOVE.W  (A7)+,D3  
0000162E  301F                     789              MOVE.W  (A7)+,D0
00001630                           790  
00001630  4E75                     791              RTS
00001632                           792  
00001632                           793  
00001632                           794  -------------------- end include --------------------
00001632                           795              INCLUDE 'APPLE.X68'
00001632                           796     
00001632                           797  ; ------------------------------------------------------------------------------
00001632                           798  APPLEINIT
00001632                           799  ; Inicializa la manzana en una posición aleatoria
00001632                           800  ; INPUT    : NONE 
00001632                           801  ; OUTPUT   : NONE
00001632                           802  ; MODIFIES : MNZPOSX, MNZPOSY, ESTDCLDS
00001632                           803  ; ------------------------------------------------------------------------------
00001632                           804  
00001632                           805              ; Llama a la función para generar la posición aleatoria
00001632  4EB9 00001720            806              JSR     GENPOSMNZ
00001638                           807  
00001638                           808              ; Convierte las coordenadas de la manzana a índice de la matriz
00001638  4EB9 0000187C            809              JSR     CINDMTRZ
0000163E                           810  
0000163E                           811              ; Verifica si la celda está ocupada o libre
0000163E                           812  CHECK:
0000163E  4EB9 00001960            813              JSR     CHECKCLD
00001644  6700 0010                814              BEQ     MARKMNZ                  ; Si está libre
00001648                           815  
00001648                           816              ; Si la celda está ocupada
00001648  4EB9 00001720            817              JSR     GENPOSMNZ                ; Genera una nueva posición
0000164E  4EB9 0000187C            818              JSR     CINDMTRZ                 ; Convierte las nuevas coordenadas
00001654  60E8                     819              BRA     CHECK                    ; Repite la comprobación
00001656                           820  
00001656                           821  MARKMNZ:
00001656                           822              ; Marca la celda como ocupada con la manzana (estado 4)
00001656  4EB9 0000190E            823              JSR     MNZOCPD
0000165C                           824  
0000165C                           825              ; Dibuja la manzana en la pantalla
0000165C  4EB9 000016A2            826              JSR     APPLEPLOT
00001662                           827  
00001662  4E75                     828              RTS
00001664                           829  
00001664                           830  ; ------------------------------------------------------------------------------
00001664                           831  APPLEUPD
00001664                           832  ; Actualiza la posición de la manzana cuando la serpiente come
00001664                           833  ; INPUT    : NONE 
00001664                           834  ; OUTPUT   : NONE
00001664                           835  ; MODIFIES : MNZPOSX, MNZPOSY, ESTDCLDS
00001664                           836  ; ------------------------------------------------------------------------------
00001664                           837  
00001664                           838  
00001664                           839              ; Convierte las coordenadas actuales de la manzana a índice de la matriz
00001664  4EB9 0000187C            840              JSR     CINDMTRZ
0000166A                           841  
0000166A                           842              ; Marca la celda anterior como vacía
0000166A  4EB9 000018CC            843              JSR     MCLDVCIA
00001670                           844  
00001670                           845              ; Llama a la función para generar una nueva posición aleatoria
00001670  4EB9 00001720            846              JSR     GENPOSMNZ
00001676                           847  
00001676                           848              ; Convierte las nuevas coordenadas de la manzana a índice de la matriz
00001676  4EB9 0000187C            849              JSR     CINDMTRZ
0000167C                           850  
0000167C                           851  CHCKUPDT:
0000167C  4EB9 00001960            852              JSR     CHECKCLD             ; Verifica si la celda está libre
00001682  6700 0010                853              BEQ     NEWMNZ               ; Si está libre
00001686                           854  
00001686                           855              ; Si la celda está ocupada
00001686  4EB9 00001720            856              JSR     GENPOSMNZ            ; Genera una nueva posición
0000168C  4EB9 0000187C            857              JSR     CINDMTRZ             ; Convierte las nuevas coordenadas
00001692  60E8                     858              BRA     CHCKUPDT             ; Repite la comprobación
00001694                           859  
00001694                           860  NEWMNZ:
00001694                           861              ; Marca la celda como ocupada con la manzana (estado 4)
00001694  4EB9 0000190E            862              JSR     MNZOCPD
0000169A                           863  
0000169A                           864              ; Dibuja la nueva manzana en la pantalla
0000169A  4EB9 000016A2            865              JSR     APPLEPLOT
000016A0                           866  
000016A0  4E75                     867              RTS
000016A2                           868              
000016A2                           869  ; ------------------------------------------------------------------------------
000016A2                           870  APPLEPLOT
000016A2                           871  ; Dibuja la manzana
000016A2                           872  ; INPUT    : NONE 
000016A2                           873  ; OUTPUT   : NONE
000016A2                           874  ; MODIFIES : NONE
000016A2                           875  ; ------------------------------------------------------------------------------
000016A2  3F00                     876              MOVE.W  D0,-(A7)
000016A4  3003                     877              MOVE.W  D3,D0
000016A6  4EB9 00001924            878              JSR     CNVICOOR
000016AC  2F01                     879              MOVE.L  D1,-(A7)                ; PRIMERO DEBEMOS DIBUJAR EL FONDO Y LUEGO LA MANZANA
000016AE                           880              
000016AE  103C 0050                881              MOVE.B  #80,D0
000016B2  223C 0090EE90            882              MOVE.L  #COLFND,D1            ; PONEMOS EL COLOR DE DIBUJADO A COLORFONDO
000016B8  4E4F                     883              TRAP    #15
000016BA                           884              
000016BA  103C 0051                885              MOVE.B  #81,D0
000016BE  223C 0090EE90            886              MOVE.L  #COLFND,D1            ; PONEMOS EL COLOR DE DIBUJADO A COLORFONDO
000016C4  4E4F                     887              TRAP    #15
000016C6                           888              
000016C6  103C 0057                889              MOVE.B  #87,D0
000016CA  221F                     890              MOVE.L  (A7)+,D1
000016CC  3F03                     891              MOVE.W  D3,-(A7)
000016CE  3601                     892              MOVE.W  D1,D3
000016D0  0643 0014                893              ADD.W   #SIZECLDA,D3
000016D4  3802                     894              MOVE.W  D2,D4                    ; DIBUJAMOS EL CUADRADO
000016D6  0644 0014                895              ADD.W   #SIZECLDA,D4
000016DA  4E4F                     896              TRAP    #15                     
000016DC                           897                          
000016DC  361F                     898              MOVE.W  (A7)+,D3  
000016DE  301F                     899              MOVE.W  (A7)+,D0
000016E0                           900  
000016E0  3F00                     901              MOVE.W  D0,-(A7)
000016E2  3003                     902              MOVE.W  D3,D0
000016E4  4EB9 00001924            903              JSR     CNVICOOR
000016EA  2F01                     904              MOVE.L  D1,-(A7)
000016EC                           905              
000016EC  103C 0050                906              MOVE.B  #80,D0
000016F0  223C 0000AAFF            907              MOVE.L  #MNZPCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL CONTORNO DE LA MANZANA
000016F6  4E4F                     908              TRAP    #15
000016F8                           909              
000016F8  103C 0051                910              MOVE.B  #81,D0
000016FC  223C 000000FF            911              MOVE.L  #MNZFCOL,D1            ; PONEMOS EL COLOR DE DIBUJADO AL COLOR DEL RELLENO DE LA MANZANA
00001702  4E4F                     912              TRAP    #15
00001704                           913              
00001704  103C 0058                914              MOVE.B  #88,D0
00001708  221F                     915              MOVE.L  (A7)+,D1
0000170A  3F03                     916              MOVE.W  D3,-(A7)
0000170C  3601                     917              MOVE.W  D1,D3
0000170E  0643 0014                918              ADD.W   #SIZECLDA,D3
00001712  3802                     919              MOVE.W  D2,D4                    ; DIBUJAMOS EL CIRCULO
00001714  0644 0014                920              ADD.W   #SIZECLDA,D4
00001718  4E4F                     921              TRAP    #15                     
0000171A                           922                          
0000171A  361F                     923              MOVE.W  (A7)+,D3  
0000171C  301F                     924              MOVE.W  (A7)+,D0
0000171E                           925  
0000171E                           926  
0000171E  4E75                     927              RTS
00001720                           928  ; ----------------------------------------------------------------------------
00001720                           929  GENPOSMNZ
00001720                           930  ; Genera una posición aleatoria para la manzana
00001720                           931  ; INPUT: NONE
00001720                           932  ; OUTPUT:
00001720                           933  ; MODIFIES: MNZPOSX, MNZPOSY
00001720                           934  ; ----------------------------------------------------------------------------
00001720                           935  
00001720  48E7 8000                936              MOVEM.L D0,-(A7)
00001724                           937  
00001724                           938              ; Genera la coordenada X aleatoria
00001724  4EB8 11D0                939              JSR     UTLRAND
00001728  0240 001F                940              ANDI.W  #NUMCLMNS-1, D0       ; Asegura que esté en [0, NUMCLMNS-1]
0000172C  C0FC 0014                941              MULU    #SIZECLDA, D0         ; Escala al tamaño real de las celdas
00001730  3200                     942              MOVE.W  D0,D1
00001732  33C0 00001E86            943              MOVE.W  D0, MNZPOSX           ; Guarda la coordenada X generada
00001738                           944              
00001738                           945              ; Generar coordenada Y aleatoria
00001738  4EB8 11D0                946              JSR     UTLRAND
0000173C  0240 0017                947              ANDI.W  #NUMFILAS-1, D0       ; Asegura que esté en el rango [0, NUMFILAS-1]
00001740  C0FC 0014                948              MULU    #SIZECLDA, D0         ; Escala al tamaño real de las celdas
00001744  3400                     949              MOVE.W  D0,D2
00001746  33C0 00001E88            950              MOVE.W  D0, MNZPOSY           ; Guarda la coordenada Y generada
0000174C                           951              
0000174C  4CDF 0001                952              MOVEM.L (A7)+,D0
00001750  4E75                     953              RTS 
00001752                           954  
00001752                           955  
00001752                           956  
00001752                           957  
00001752                           958  
00001752                           959  
00001752                           960  -------------------- end include --------------------
00001752                           961              INCLUDE 'SCORE.X68'
00001752                           962     
00001752                           963  ; ------------------------------------------------------------------------------
00001752                           964  SCOINIT
00001752                           965  ; INICIALIZAR MARCADOR.
00001752                           966  ; INPUT    : NONE 
00001752                           967  ; OUTPUT   : NONE
00001752                           968  ; MODIFIES : NONE
00001752                           969  ; ------------------------------------------------------------------------------
00001752  4279 00001E9E            970              CLR.W   (JGOPNTS)
00001758  4E75                     971              RTS
0000175A                           972              
0000175A                           973  ; ------------------------------------------------------------------------------
0000175A                           974  SCOUPD
0000175A                           975  ; ACTUALIZAR MARCADOR.
0000175A                           976  ; INPUT    : NONE 
0000175A                           977  ; OUTPUT   : NONE
0000175A                           978  ; MODIFIES : NONE
0000175A                           979  ; ------------------------------------------------------------------------------
0000175A                           980              
0000175A  48E7 8000                981              MOVEM.L D0,-(A7)
0000175E                           982              
0000175E                           983              ;Incrementa el marcador
0000175E  3039 00001E9E            984              MOVE.W  (JGOPNTS),D0
00001764  0640 0019                985              ADD.W  #25,D0
00001768  33C0 00001E9E            986              MOVE.W  D0,(JGOPNTS)
0000176E                           987              
0000176E  4CDF 0001                988              MOVEM.L (A7)+,D0
00001772                           989  
00001772  4E75                     990              RTS
00001774                           991              
00001774                           992  ; ------------------------------------------------------------------------------
00001774                           993  SCOPLOT
00001774                           994  ; DIBUJAR MARCADOR.
00001774                           995  ; INPUT    : NONE 
00001774                           996  ; OUTPUT   : NONE
00001774                           997  ; MODIFIES : NONE
00001774                           998  ; ------------------------------------------------------------------------------
00001774  48E7 C040                999             MOVEM.L  D0-D1/A1,-(A7)
00001778                          1000             ; SET COLOR DE FONDO
00001778  103C 0051               1001             MOVE.B   #81,D0
0000177C  223C 0090EE90           1002             MOVE.L   #COLFND,D1
00001782  4E4F                    1003             TRAP     #15
00001784                          1004             
00001784                          1005             
00001784                          1006             
00001784                          1007             ; DIBUJAR LINEA DE PUNTUACIÓN
00001784  43F9 0000179E           1008              LEA     .TXT1,A1
0000178A  4281                    1009              CLR.L   D1
0000178C  3239 00001E9E           1010              MOVE.W  (JGOPNTS),D1
00001792  103C 0011               1011              MOVE.B  #17,D0
00001796  4E4F                    1012              TRAP    #15
00001798                          1013              
00001798  4CDF 0203               1014              MOVEM.L (A7)+,D0-D1/A1
0000179C  4E75                    1015              RTS
0000179E                          1016  
0000179E                          1017  
0000179E= 50 55 4E 54 4F 53 ...   1018  .TXT1       DC.B    'PUNTOS : ',0
000017A8                          1019  
000017A8                          1020  
000017A8                          1021  
000017A8                          1022  
000017A8                          1023  -------------------- end include --------------------
000017A8                          1024              INCLUDE 'GAME.X68'
000017A8                          1025  ; ==============================================================================
000017A8                          1026  ; GAME MANAGEMENT
000017A8                          1027  ; ==============================================================================
000017A8                          1028  
000017A8                          1029  ; ------------------------------------------------------------------------------
000017A8                          1030  GAMINIT
000017A8                          1031  ; INITIALIZES GAME.
000017A8                          1032  ; INPUT    : NONE
000017A8                          1033  ; OUTPUT   : NONE
000017A8                          1034  ; MODIFIES : NONE
000017A8                          1035  ; ------------------------------------------------------------------------------
000017A8  4EB9 000017EA           1036              JSR     MTZINIT
000017AE  4EB8 12EE               1037              JSR     HEADINIT
000017B2  4EB8 1492               1038              JSR     SEGINIT
000017B6  4EB8 1592               1039              JSR     TAILINIT
000017BA  4EB8 1752               1040              JSR     SCOINIT
000017BE  6000 FE72               1041              BRA     APPLEINIT
000017C2                          1042  
000017C2                          1043  ; ------------------------------------------------------------------------------
000017C2                          1044  GAMUPD
000017C2                          1045  ; UPDATES THE GAME
000017C2                          1046  ; INPUT    : NONE
000017C2                          1047  ; OUTPUT   : NONE
000017C2                          1048  ; MODIFIES : NONE
000017C2                          1049  ; ------------------------------------------------------------------------------
000017C2  4EB8 15A4               1050              JSR     TAILUPD
000017C6  4EB8 14C0               1051              JSR     SEGUPD
000017CA  4EB8 130E               1052              JSR     HEADUPD
000017CE  6000 01EC               1053              BRA     MTZUPD       
000017D2                          1054  
000017D2                          1055  ; ------------------------------------------------------------------------------
000017D2                          1056  GAMPLOT
000017D2                          1057  ; PLOTS THE GAME
000017D2                          1058  ; INPUT    : NONE
000017D2                          1059  ; OUTPUT   : NONE
000017D2                          1060  ; MODIFIES : NONE
000017D2                          1061  ; ------------------------------------------------------------------------------
000017D2  4EB8 140E               1062              JSR    HEADPLOT
000017D6  4EB8 1552               1063              JSR    SEGPLOT
000017DA  4EB8 15F2               1064              JSR    TAILPLOT
000017DE  4EB8 16A2               1065              JSR    APPLEPLOT
000017E2  4EB9 00001A3A           1066              JSR    MTZPLOT
000017E8  608A                    1067              BRA    SCOPLOT
000017EA                          1068  
000017EA                          1069  
000017EA                          1070  
000017EA                          1071  
000017EA                          1072  
000017EA                          1073  -------------------- end include --------------------
000017EA                          1074              INCLUDE 'MATRIZ.X68'
000017EA                          1075  ; ----------------------------------------------------------------------------
000017EA                          1076  ; MATRIZ
000017EA                          1077  ; ----------------------------------------------------------------------------
000017EA                          1078  
000017EA                          1079  ;-----------------------------------------------------------------------------
000017EA                          1080  MTZINIT
000017EA                          1081  ; INICIALIZA LA MATRIZ, AL PRINCIPIO ESTÁ VACÍA
000017EA                          1082  ; INPUT    : NONE
000017EA                          1083  ; OUTPUT   : NONE
000017EA                          1084  ; MODIFIES : Variable ESTCLDS que contiene el estado de las celdas
000017EA                          1085  ; ----------------------------------------------------------------------------
000017EA                          1086              
000017EA  48A7 E080               1087              MOVEM.W D0-D2/A0,-(A7)
000017EE                          1088              
000017EE  41F9 00001EAC           1089              LEA ESTDCLDS,A0       ; Apunta al inicio de ESTDCLDS
000017F4  303C 0300               1090              MOVE.W #TCELDAS,D0    ; Número total de celdas
000017F8                          1091  
000017F8                          1092  CLNCLDS:
000017F8  4218                    1093              CLR.B (A0)+            ; Coloca 0 en cada celda
000017FA  5340                    1094              SUBI.W #1, D0          ; Decrementa el contador de celdas
000017FC  66FA                    1095              BNE CLNCLDS            ; Repite hasta que esten vacías
000017FE                          1096              
000017FE                          1097              
000017FE  3239 00001E8A           1098              MOVE.W  (CBZPOSX),D1             ; VEMOS LA POSICION INICIAL DE LA CABEZA             
00001804  3439 00001E8C           1099              MOVE.W  (CBZPOSY),D2
0000180A  4EB9 0000187C           1100              JSR     CINDMTRZ
00001810  4EB9 000018B6           1101              JSR     CBZOCPD                 ; MARCAMOS LA POSICIÓN COMO CABEZA
00001816                          1102              
00001816  3239 00001E96           1103              MOVE.W  (SGMPOSX),D1
0000181C  3439 00001E98           1104              MOVE.W  (SGMPOSY),D2             ; VEMOS LA POSICIÓN DEL SEGMENTO
00001822  4EB9 0000187C           1105              JSR     CINDMTRZ
00001828  4EB9 000018E2           1106              JSR     SGMOCPD                 ; MARCAMOS LA POSICIÓN DEL SEGMENTO
0000182E                          1107              
0000182E  3239 00001E9A           1108              MOVE.W  (SGMPOSX2),D1
00001834  3439 00001E9C           1109              MOVE.W  (SGMPOSY2),D2            ; VEMOS LA POSICIÓN DEL SEGMENTO 2
0000183A  4EB9 0000187C           1110              JSR     CINDMTRZ
00001840  4EB9 000018E2           1111              JSR     SGMOCPD                 ; MARCAMOS LA POSICION DEL SEGMENTO 2
00001846                          1112              
00001846  3239 00001E92           1113              MOVE.W  (COLPOSX),D1             ; VEMOS LA POSICIÓN DE LA COLA
0000184C  3439 00001E94           1114              MOVE.W  (COLPOSY),D2
00001852  4EB9 0000187C           1115              JSR     CINDMTRZ
00001858  4EB9 000018F8           1116              JSR     COLOCPD                 ; MARCAMOS LA POSICIÓN DE LA COLA
0000185E                          1117              
0000185E  3239 00001E86           1118              MOVE.W  (MNZPOSX),D1             ; VEMOS LA POSICIÓN INICIAL DE LA MANZANA
00001864  3439 00001E88           1119              MOVE.W  (MNZPOSY),D2
0000186A  4EB9 0000187C           1120              JSR     CINDMTRZ
00001870  4EB9 0000190E           1121              JSR     MNZOCPD                 ; MARCAMOS LA POSICIÓN DE LA MANZANA
00001876                          1122              
00001876                          1123              
00001876  4C9F 0107               1124              MOVEM.W (A7)+,D0-D2/A0
0000187A                          1125  
0000187A  4E75                    1126              RTS
0000187C                          1127  
0000187C                          1128  ;-----------------------------------------------------------------------------
0000187C                          1129  CINDMTRZ
0000187C                          1130  ; CALCULA EL ÍNDICE DE UNA CELDA
0000187C                          1131  ; INPUT    : D1 = coordenada X pantalla, D2 = coordenada Y pantalla
0000187C                          1132  ; OUTPUT   : D0 = índice de la celda en ESTDCLDS
0000187C                          1133  ; MODIFIES : NONE
0000187C                          1134  ; ----------------------------------------------------------------------------
0000187C                          1135  
0000187C  48A7 7000               1136               MOVEM.W D1-D3,-(A7)     ; Guarda los registros D1-D3 en la pila
00001880                          1137  
00001880                          1138              ; Divide X por SIZECLDA
00001880  3601                    1139              MOVE.W  D1,D3          ; Copia X a D3
00001882  4241                    1140              CLR.W   D1              ; Inicializa el cociente de X
00001884                          1141  
00001884  B67C 0014               1142  DIVX:       CMP.W   #SIZECLDA,D3    ; Compara D3 con SIZECLDA
00001888  6D00 000A               1143              BLT     ENDDIVX         ; Si D3 < SIZECLDA, salta a ENDDIVX
0000188C  0443 0014               1144              SUB.W   #SIZECLDA,D3   ; Resta SIZECLDA de D3
00001890  5241                    1145              ADDQ.W  #1,D1          ; Incrementa el cociente de X
00001892  60F0                    1146              BRA     DIVX            ; Repite el bucle
00001894                          1147  
00001894                          1148  ENDDIVX:
00001894                          1149  
00001894                          1150              ; Divide Y por SIZECLDA
00001894  3602                    1151              MOVE.W  D2,D3          ; Copia Y a D3
00001896  4242                    1152              CLR.W   D2              ; Inicializa el cociente de Y
00001898                          1153  
00001898  B67C 0014               1154  DIVY:       CMP.W   #SIZECLDA,D3    ; Compara D3 con SIZECLDA
0000189C  6D00 000A               1155              BLT     ENDDIVY         ; Si D3 < SIZECLDA, salta a ENDDIVY
000018A0  0443 0014               1156              SUB.W   #SIZECLDA,D3   ; Resta SIZECLDA de D3
000018A4  5242                    1157              ADDQ.W  #1, D2          ; Incrementa el cociente de Y
000018A6  60F0                    1158              BRA     DIVY            ; Repite el bucle
000018A8                          1159  
000018A8                          1160  ENDDIVY:
000018A8                          1161  
000018A8                          1162              ; Calcula el índice
000018A8  4240                    1163              CLR.W   D0
000018AA  3002                    1164              MOVE.W  D2, D0          ; D0 = Y_CELDA
000018AC  EB40                    1165              ASL.W   #5, D0          ; D0 = Y_CELDA * NUMCLMNS (32 = 2^5)
000018AE  D041                    1166              ADD.W   D1, D0          ; D0 = Y_CELDA * NUMCLMNS + X_CELDA
000018B0                          1167  
000018B0  4C9F 000E               1168              MOVEM.W (A7)+,D1-D3     ; Restaura los registros D1-D3 desde la pila
000018B4                          1169  
000018B4  4E75                    1170              RTS  
000018B6                          1171              
000018B6                          1172  ;-----------------------------------------------------------------------------
000018B6                          1173  CBZOCPD
000018B6                          1174  ; MARCA UNA CELDA COMO OCUPADA POR LA CABEZA
000018B6                          1175  ; INPUT    : D0 = índice de la celda en ESTDCLDS
000018B6                          1176  ; OUTPUT   : NONE
000018B6                          1177  ; MODIFIES : Estado de la celda en la variable ESTDCLDS
000018B6                          1178  ; ----------------------------------------------------------------------------
000018B6                          1179  
000018B6  48A7 0080               1180              MOVEM.W A0,-(A7)
000018BA                          1181  
000018BA  41F9 00001EAC           1182              LEA     ESTDCLDS,A0                ; Dirección de la matriz en A0
000018C0  11BC 0003 0000          1183              MOVE.B  #3,(A0, D0.W)           ; Marca la celda como ocupada
000018C6                          1184              
000018C6  4C9F 0100               1185              MOVEM.W (A7)+,A0
000018CA                          1186              
000018CA  4E75                    1187              RTS
000018CC                          1188              
000018CC                          1189              
000018CC                          1190              
000018CC                          1191             
000018CC                          1192  ;-----------------------------------------------------------------------------
000018CC                          1193  MCLDVCIA
000018CC                          1194  ; MARCA UNA CELDA COMO VACÍA
000018CC                          1195  ; INPUT    : D0 = índice de la celda en ESTDCLDS
000018CC                          1196  ; OUTPUT   : NONE
000018CC                          1197  ; MODIFIES : Estado de la celda en la variable ESTDCLDS
000018CC                          1198  ; ----------------------------------------------------------------------------
000018CC                          1199  
000018CC  48A7 0080               1200              MOVEM.W A0,-(A7)
000018D0                          1201  
000018D0  41F9 00001EAC           1202              LEA     ESTDCLDS,A0                ; Direccion de la matriz en A0
000018D6  11BC 0000 0000          1203              MOVE.B  #0,(A0,D0.W)           ; Marca la celda como vacía
000018DC                          1204              
000018DC  4C9F 0100               1205              MOVEM.W (A7)+,A0
000018E0                          1206              
000018E0  4E75                    1207              RTS
000018E2                          1208  
000018E2                          1209  ;-----------------------------------------------------------------------------
000018E2                          1210  SGMOCPD
000018E2                          1211  ; MARCA UNA CELDA COMO OCUPADA POR EL SEGMENTO
000018E2                          1212  ; INPUT    : D0 = índice de la celda en ESTDCLDS
000018E2                          1213  ; OUTPUT   : NONE
000018E2                          1214  ; MODIFIES : Estado de la celda en la variable ESTDCLDS
000018E2                          1215  ; ----------------------------------------------------------------------------
000018E2                          1216  
000018E2  48A7 0080               1217              MOVEM.W A0,-(A7)
000018E6                          1218  
000018E6  41F9 00001EAC           1219              LEA ESTDCLDS,A0                ; Dirección de la matriz en A0
000018EC  11BC 0002 0000          1220              MOVE.B #2,(A0,D0.W)           ; Marca la celda como ocupada
000018F2                          1221              
000018F2  4C9F 0100               1222              MOVEM.W (A7)+,A0
000018F6                          1223              
000018F6  4E75                    1224              RTS
000018F8                          1225              
000018F8                          1226  ;-----------------------------------------------------------------------------
000018F8                          1227  COLOCPD
000018F8                          1228  ; MARCA UNA CELDA COMO OCUPADA POR LA COLA
000018F8                          1229  ; INPUT    : D0 = índice de la celda en ESTDCLDS
000018F8                          1230  ; OUTPUT   : NONE
000018F8                          1231  ; MODIFIES : Estado de la celda en la variable ESTDCLDS
000018F8                          1232  ; ----------------------------------------------------------------------------
000018F8                          1233  
000018F8  48A7 0080               1234              MOVEM.W A0,-(A7)
000018FC                          1235  
000018FC  41F9 00001EAC           1236              LEA ESTDCLDS,A0                ; Dirección de la matriz en A0
00001902  11BC 0001 0000          1237              MOVE.B #1,(A0,D0.W)           ; Marca la celda como ocupada
00001908                          1238              
00001908  4C9F 0100               1239              MOVEM.W (A7)+,A0
0000190C                          1240              
0000190C  4E75                    1241              RTS
0000190E                          1242  
0000190E                          1243  
0000190E                          1244  ;-----------------------------------------------------------------------------
0000190E                          1245  MNZOCPD
0000190E                          1246  ; MARCA UNA CELDA COMO OCUPADA POR LA MANZANA
0000190E                          1247  ; INPUT    : D0 = índice de la celda en ESTDCLDS
0000190E                          1248  ; OUTPUT   : NONE
0000190E                          1249  ; MODIFIES : Estado de la celda en la variable ESTDCLDS
0000190E                          1250  ; ----------------------------------------------------------------------------
0000190E                          1251  
0000190E  48A7 0080               1252              MOVEM.W A0,-(A7)
00001912                          1253  
00001912  41F9 00001EAC           1254              LEA ESTDCLDS,A0                ; Dirección de la matriz en A0
00001918  11BC 0004 0000          1255              MOVE.B #4,(A0,D0.W)           ; Marca la celda como ocupada
0000191E                          1256              
0000191E  4C9F 0100               1257              MOVEM.W (A7)+,A0
00001922                          1258              
00001922  4E75                    1259              RTS
00001924                          1260  
00001924                          1261              
00001924                          1262  ;-----------------------------------------------------------------------------
00001924                          1263  CNVICOOR
00001924                          1264  ; Convierte un índice de celda a coordenadas de pantalla (X, Y)
00001924                          1265  ; INPUT    : D0 = índice de la celda en ESTADO_CELDAS
00001924                          1266  ; OUTPUT   : D1 = coordenada X, D2 = coordenada Y
00001924                          1267  ; MODIFIES : NONE
00001924                          1268  ; ----------------------------------------------------------------------------
00001924                          1269  
00001924  48A7 9800               1270              MOVEM.W D0/D3-D4,-(A7)
00001928                          1271  
00001928  3400                    1272              MOVE.W  D0,D2         ; Copia índice a D2 para calcular la fila
0000192A  EA4A                    1273              LSR.W   #5,D2         ; D2 = índice / NUM_COLUMNAS (32 = 2^5)
0000192C  3200                    1274              MOVE.W  D0,D1         ; Copia índice a D1 para calcular la columna
0000192E  C27C 001F               1275              AND.W   #$1F,D1       ; D1 = índice % NUM_COLUMNAS (31 = 0x1F) (CREO)
00001932                          1276  
00001932                          1277              ; Multiplica por TAMAÑO_CELDA = 10
00001932  363C 0014               1278              MOVE.W  #SIZECLDA, D3
00001936  3801                    1279              MOVE.W  D1,D4         ; Copia D1 para multiplicar por 10
00001938  4241                    1280              CLR.W   D1            ; Inicializa resultado
0000193A                          1281  
0000193A                          1282  
0000193A                          1283  MULTLOOPX: 
0000193A  B87C 0000               1284              CMP.W   #0,D4        ; ¿Quedan iteraciones?
0000193E  6700 0008               1285              BEQ     ENDMULTX
00001942  D243                    1286              ADD.W   D3,D1         ; Suma TAMANO_CELDA (10) repetidamente
00001944                          1287  
00001944  5344                    1288              SUBQ.W  #1,D4         ; Cuenta las iteraciones restantes
00001946  60F2                    1289              BRA     MULTLOOPX     ; Repite mientras no sea 0
00001948                          1290  ENDMULTX: 
00001948  3802                    1291              MOVE.W  D2,D4         ; Copia D2 para multiplicar por 10
0000194A  4242                    1292              CLR.W   D2            ; Inicializa resultado
0000194C                          1293  
0000194C                          1294  MULTLOOPY: 
0000194C  B87C 0000               1295              CMP.W   #0,D4        ; ¿Quedan iteraciones?
00001950  6700 0008               1296              BEQ     ENDMULTY
00001954  D443                    1297              ADD.W   D3,D2         ; Suma TAMANO_CELDA (10) repetidamente
00001956  5344                    1298              SUBQ.W  #1,D4         ; Cuenta las iteraciones restantes
00001958  60F2                    1299              BRA     MULTLOOPY     ; Repite mientras no sea 0
0000195A                          1300  ENDMULTY:
0000195A  4C9F 0019               1301              MOVEM.W (A7)+,D0/D3-D4
0000195E                          1302  
0000195E  4E75                    1303              RTS
00001960                          1304  
00001960                          1305  ; ----------------------------------------------------------------------------
00001960                          1306  CHECKCLD
00001960                          1307  ; INPUT: D0 = índice de la celda
00001960                          1308  ; OUTPUT: D0 = 0 si está vacía, 1 si está ocupada
00001960                          1309  ; MODIFIES: Ninguno
00001960                          1310  ; ----------------------------------------------------------------------------
00001960                          1311  
00001960  41F9 00001EAC           1312              LEA     ESTDCLDS,A0    ; Carga la dirección de la matriz ESTDCLDS
00001966  1230 0000               1313              MOVE.B  (A0,D0.W),D1   ; Carga el estado de la celda en D1
0000196A  B23C 0000               1314              CMP.B   #0,D1          ; Compara si está vacía (0)
0000196E  6700 0008               1315              BEQ     CLDFREE         ; Si está vacía
00001972  303C 0001               1316              MOVE.W  #1,D0          ; Si está ocupada, devuelve 1 (ocupada)
00001976                          1317  
00001976  4E75                    1318              RTS
00001978                          1319  
00001978                          1320  CLDFREE:
00001978  303C 0000               1321              MOVE.W  #0,D0                 ; Devuelve 0 (libre)
0000197C                          1322  
0000197C  4E75                    1323              RTS
0000197E                          1324  
0000197E                          1325  
0000197E                          1326  ;-----------------------------------------------------------------------------
0000197E                          1327  FONPLOT
0000197E                          1328  ; DIBUJADO DEL FONDO
0000197E                          1329  ; INPUT    : NONE
0000197E                          1330  ; OUTPUT   : NONE
0000197E                          1331  ; MODIFIES : Variable ESTCLDS que contiene el estado de las celdas
0000197E                          1332  ; ----------------------------------------------------------------------------
0000197E                          1333  
0000197E  3F00                    1334              MOVE.W  D0,-(A7)
00001980  3003                    1335              MOVE.W  D3,D0
00001982  4EB8 1924               1336              JSR     CNVICOOR
00001986  2F01                    1337              MOVE.L  D1,-(A7)
00001988                          1338              
00001988  103C 0050               1339              MOVE.B  #80,D0
0000198C  223C 0090EE90           1340              MOVE.L  #COLFND,D1            ; PONEMOS EL COLOR DE DIBUJADO A COLORFONDO
00001992  4E4F                    1341              TRAP    #15
00001994                          1342              
00001994  103C 0051               1343              MOVE.B  #81,D0
00001998  223C 0090EE90           1344              MOVE.L  #COLFND,D1            ; PONEMOS EL COLOR DE DIBUJADO A COLORFONDO
0000199E  4E4F                    1345              TRAP    #15
000019A0                          1346              
000019A0  103C 0057               1347              MOVE.B  #87,D0
000019A4  221F                    1348              MOVE.L  (A7)+,D1
000019A6  3F03                    1349              MOVE.W  D3,-(A7)
000019A8  3601                    1350              MOVE.W  D1,D3
000019AA  0643 0014               1351              ADD.W   #SIZECLDA,D3
000019AE  3802                    1352              MOVE.W  D2,D4                    ; DIBUJAMOS EL CUADRADO
000019B0  0644 0014               1353              ADD.W   #SIZECLDA,D4
000019B4  4E4F                    1354              TRAP    #15                     
000019B6                          1355                          
000019B6  361F                    1356              MOVE.W  (A7)+,D3  
000019B8  301F                    1357              MOVE.W  (A7)+,D0
000019BA  4E75                    1358              RTS         
000019BC                          1359  
000019BC                          1360  
000019BC                          1361  
000019BC                          1362  ;-----------------------------------------------------------------------------
000019BC                          1363  MTZUPD
000019BC                          1364  ; ACTUALIZA LA MATRIZ CASILLA A CASILLA
000019BC                          1365  ; INPUT    : NONE
000019BC                          1366  ; OUTPUT   : NONE
000019BC                          1367  ; MODIFIES : Variable ESTCLDS que contiene el estado de las celdas
000019BC                          1368  ; ----------------------------------------------------------------------------
000019BC                          1369  
000019BC                          1370  
000019BC  48A7 E080               1371              MOVEM.W D0-D2/A0,-(A7)
000019C0                          1372              
000019C0  41F9 00001EAC           1373              LEA ESTDCLDS,A0       ; Apunta al inicio de ESTDCLDS
000019C6  303C 0300               1374              MOVE.W #TCELDAS,D0    ; Número total de celdas
000019CA                          1375  
000019CA                          1376  .CLNCLDS:
000019CA  4218                    1377              CLR.B (A0)+            ; Coloca 0 en cada celda
000019CC  5340                    1378              SUBI.W #1,D0          ; Decrementa el contador de celdas
000019CE  66FA                    1379              BNE .CLNCLDS           ; Repite hasta que esten vacías
000019D0                          1380              
000019D0                          1381              
000019D0  3239 00001E8A           1382              MOVE.W  (CBZPOSX),D1             ; VEMOS LA POSICION INICIAL DE LA CABEZA             
000019D6  3439 00001E8C           1383              MOVE.W  (CBZPOSY),D2
000019DC  4EB8 187C               1384              JSR     CINDMTRZ
000019E0  4EB8 18B6               1385              JSR     CBZOCPD                 ; MARCAMOS LA POSICIÓN COMO CABEZA
000019E4                          1386              
000019E4  3239 00001E96           1387              MOVE.W  (SGMPOSX),D1
000019EA  3439 00001E98           1388              MOVE.W  (SGMPOSY),D2             ; VEMOS LA POSICIÓN INICIAL DEL SEGMENTO
000019F0  4EB8 187C               1389              JSR     CINDMTRZ
000019F4  4EB8 18E2               1390              JSR     SGMOCPD                 ; MARCAMOS LA POSICIÓN DEL SEGMENTO
000019F8                          1391              
000019F8  3239 00001E9A           1392              MOVE.W  (SGMPOSX2),D1
000019FE  3439 00001E9C           1393              MOVE.W  (SGMPOSY2),D2             ; VEMOS LA POSICIÓN INICIAL DEL SEGMENTO
00001A04  4EB8 187C               1394              JSR     CINDMTRZ
00001A08  4EB8 18E2               1395              JSR     SGMOCPD                 ; MARCAMOS LA POSICIÓN DEL SEGMENTO
00001A0C                          1396              
00001A0C  3239 00001E92           1397              MOVE.W  (COLPOSX),D1             ; VEMOS LA POSICIÓN INICIAL DE LA COLA
00001A12  3439 00001E94           1398              MOVE.W  (COLPOSY),D2
00001A18  4EB8 187C               1399              JSR     CINDMTRZ
00001A1C  4EB8 18F8               1400              JSR     COLOCPD                 ; MARCAMOS LA POSICIÓN DE LA COLA
00001A20                          1401              
00001A20  3239 00001E86           1402              MOVE.W  (MNZPOSX),D1             ; VEMOS LA POSICIÓN INICIAL DE LA MANZANA
00001A26  3439 00001E88           1403              MOVE.W  (MNZPOSY),D2
00001A2C  4EB8 187C               1404              JSR     CINDMTRZ
00001A30  4EB8 190E               1405              JSR     MNZOCPD                 ; MARCAMOS LA POSICIÓN DE LA MANZANA
00001A34                          1406              
00001A34                          1407              
00001A34  4C9F 0107               1408              MOVEM.W (A7)+,D0-D2/A0
00001A38                          1409  
00001A38  4E75                    1410              RTS
00001A3A                          1411  
00001A3A                          1412  
00001A3A                          1413  
00001A3A                          1414  ;-----------------------------------------------------------------------------
00001A3A                          1415  MTZPLOT
00001A3A                          1416  ; DIBUJA LA MATRIZ CASILLA A CASILLA
00001A3A                          1417  ; INPUT    : NONE
00001A3A                          1418  ; OUTPUT   : NONE
00001A3A                          1419  ; MODIFIES : Variable ESTCLDS que contiene el estado de las celdas
00001A3A                          1420  ; ----------------------------------------------------------------------------
00001A3A  48E7 F080               1421              MOVEM.L D0-D3/A0,-(A7)
00001A3E                          1422  
00001A3E  4240                    1423              CLR.W   D0
00001A40  4243                    1424              CLR.W   D3
00001A42  41F9 00001EAC           1425              LEA     ESTDCLDS,A0            ; Apunta al inicio de ESTDCLDS
00001A48  303C 0300               1426              MOVE.W  #TCELDAS,D0            ; Número total de celdas
00001A4C  363C 0000               1427              MOVE.W  #0,D3                   ; LO UTILIZAMOS PARA SABER EL INDICE EN EL QUE NOS ENCONTRAMOS
00001A50  4241                    1428              CLR.W   D1
00001A52  4242                    1429              CLR.W   D2
00001A54                          1430              
00001A54                          1431  
00001A54                          1432  PLOTCLDS:
00001A54  1218                    1433              MOVE.B  (A0)+,D1                ; MOVEMOS EL VALOR DE LA CELDA A D1
00001A56  B23C 0000               1434              CMP.B   #0,D1
00001A5A  6700 0034               1435              BEQ     PLOTVAC                 ; SALTA A DIBUJAR POSICIÓN VACÍA
00001A5E  B23C 0001               1436              CMP.B   #1,D1 
00001A62  6700 0032               1437              BEQ     PLOTCOL                 ; SALTA A DIBUJAR COLA
00001A66  B23C 0002               1438              CMP.B   #2,D1
00001A6A  6700 0030               1439              BEQ     PLOTSEG                 ; SALTA A DIBUJAR SEGMENTO
00001A6E  B23C 0003               1440              CMP.B   #3,D1
00001A72  6700 0016               1441              BEQ     PLOTCBZ                 ; SALTA A DIBUJAR CABEZA
00001A76  B23C 0004               1442              CMP.B   #4,D1                 
00001A7A  6700 0026               1443              BEQ     PLOTAPPLE               ; SALTA A DIBUJAR MANZANA
00001A7E                          1444    
00001A7E                          1445  DONEPLOT            
00001A7E  5243                    1446              ADDQ    #1,D3                   ; AUMENTAMOS EL INDICE DE CELDA PARA LA SIGUIENTE
00001A80  5340                    1447              SUBI.W  #1,D0                  ; Decrementa el contador de celdas
00001A82  66D0                    1448              BNE     PLOTCLDS                ; Repite hasta que esten vacías
00001A84  4CDF 010F               1449              MOVEM.L (A7)+,D0-D3/A0
00001A88  4E75                    1450              RTS
00001A8A                          1451  PLOTCBZ:
00001A8A  4EB8 140E               1452              JSR     HEADPLOT
00001A8E  60EE                    1453              BRA     DONEPLOT
00001A90                          1454  
00001A90                          1455  PLOTVAC:    
00001A90  4EB8 197E               1456              JSR     FONPLOT
00001A94  60E8                    1457              BRA     DONEPLOT                ; DIBUJADO HECHO 
00001A96                          1458  
00001A96                          1459  PLOTCOL:   
00001A96  4EB8 15F2               1460              JSR     TAILPLOT 
00001A9A  60E2                    1461              BRA     DONEPLOT                ; DIBUJADO HECHO 
00001A9C                          1462              
00001A9C                          1463  PLOTSEG:    
00001A9C  4EB8 1552               1464              JSR     SEGPLOT
00001AA0  60DC                    1465              BRA     DONEPLOT                ; DIBUJADO HECHO    
00001AA2                          1466  
00001AA2                          1467  PLOTAPPLE:
00001AA2  4EB8 16A2               1468              JSR     APPLEPLOT
00001AA6  60D6                    1469              BRA     DONEPLOT            
00001AA8                          1470  
00001AA8                          1471  
00001AA8                          1472  
00001AA8                          1473  
00001AA8                          1474  
00001AA8                          1475  
00001AA8                          1476  
00001AA8                          1477  
00001AA8                          1478  
00001AA8                          1479  
00001AA8                          1480  
00001AA8                          1481  
00001AA8                          1482  
00001AA8                          1483  
00001AA8                          1484  
00001AA8                          1485  
00001AA8                          1486  
00001AA8                          1487  
00001AA8                          1488  
00001AA8                          1489  
00001AA8                          1490  
00001AA8                          1491  -------------------- end include --------------------
00001AA8                          1492              INCLUDE 'INTRO.X68'
00001AA8                          1493  ; ==============================================================================
00001AA8                          1494  ; INTRO SCREEN
00001AA8                          1495  ; ==============================================================================
00001AA8                          1496  
00001AA8                          1497  ; ------------------------------------------------------------------------------
00001AA8                          1498  ISCINIT
00001AA8                          1499  ; INTRO SCREEN INIT
00001AA8                          1500  ; INPUT    : NONE
00001AA8                          1501  ; OUTPUT   : NONE
00001AA8                          1502  ; MODIFIES : NONE
00001AA8                          1503  ; ------------------------------------------------------------------------------
00001AA8                          1504  
00001AA8  4279 00001EA0           1505              CLR.W   (ISCTIMER)
00001AAE                          1506              
00001AAE  4E75                    1507              RTS
00001AB0                          1508  
00001AB0                          1509  ; ------------------------------------------------------------------------------
00001AB0                          1510  ISCUPD
00001AB0                          1511  ; INTRO SCREEN UPDATE
00001AB0                          1512  ; INPUT    : NONE
00001AB0                          1513  ; OUTPUT   : NONE
00001AB0                          1514  ; MODIFIES : NONE
00001AB0                          1515  ; ------------------------------------------------------------------------------
00001AB0                          1516  
00001AB0  48E7 FC00               1517              MOVEM.L D0-D5,-(A7)
00001AB4                          1518              
00001AB4  323C 0107               1519              MOVE.W  #$0107,D1               ;HABILITAR IRQ
00001AB8  303C 003C               1520              MOVE.W  #60,D0
00001ABC  4E4F                    1521              TRAP    #15
00001ABE                          1522              
00001ABE                          1523  .MAINLOOP            
00001ABE  123C 0000               1524              MOVE.B  #0,D1                   ;LEER ESTADO ACTUAL RATON
00001AC2  303C 003D               1525              MOVE.   #61,D0
00001AC6  4E4F                    1526              TRAP    #15
00001AC8                          1527              
00001AC8  2401                    1528              MOVE.L  D1,D2                   ;GUARDAR COORDENADAS RATON EN D2
00001ACA  0200 0001               1529              ANDI.B  #1,D0                   ;COMPROBAR click izquierdo
00001ACE  4A40                    1530              TST     D0
00001AD0  6700 0032               1531              BEQ     .CONT
00001AD4                          1532              
00001AD4                          1533              ;MIRAMOS SI SE HA PULSADO EN EL TEXTO CORRESPONDIENTE
00001AD4  263C 00000108           1534              MOVE.L  #$108,D3                 ;(640 - 112) / 2 = 264 PIXELES -> COORDENADA X
00001ADA  7819                    1535              MOVE.L  #$19,D4                  ;COORDENADA Y DEL TEXTO 25
00001ADC                          1536              
00001ADC  2A02                    1537              MOVE.L  D2,D5                   ;COORDENADA Y RATON
00001ADE  0285 0000FFFF           1538              ANDI.L  #$0000FFFF,D5
00001AE4  BA84                    1539              CMP.L   D4,D5
00001AE6  6D00 001C               1540              BLT     .CONT                   ;SI Y < TEXTO
00001AEA                          1541  
00001AEA  2A02                    1542              MOVE.L  D2,D5                   ;COORDENADA X RATON
00001AEC  0285 0000FFFF           1543              ANDI.L  #$FFFF,D5               ;EXTRAER X (BITS BAJOS)
00001AF2  BA83                    1544              CMP.L   D3,D5
00001AF4  6D00 000E               1545              BLT     .CONT                   ;SI X < TEXTO
00001AF8                          1546              
00001AF8                          1547              ;SI EL CLICK ESTA DENTRO DEL AREA DEL TEXTO
00001AF8  33FC 0002 00001EA8      1548              MOVE.W  #2,(STANEXT)            ; SI COINCIDE INICIAR JUEGO
00001B00  6000 001C               1549              BRA     .DONE            
00001B04                          1550              
00001B04                          1551  .CONT       
00001B04  5279 00001EA0           1552              ADDQ.W  #1,(ISCTIMER)
00001B0A  0C79 01F4 00001EA0      1553              CMP.W   #ISCMAXTM,(ISCTIMER)
00001B12  6D00 000A               1554              BLT     .DONE
00001B16  33FC 0001 00001EA8      1555              MOVE.W  #1,(STANEXT)
00001B1E                          1556              
00001B1E                          1557  .DONE       
00001B1E  4CDF 003F               1558              MOVEM.L (A7)+,D0-D5
00001B22  4E75                    1559              RTS
00001B24                          1560  
00001B24                          1561  ; ------------------------------------------------------------------------------
00001B24                          1562  ISCPLOT
00001B24                          1563  ; INTRO SCREEN PLOT
00001B24                          1564  ; INPUT    : NONE
00001B24                          1565  ; OUTPUT   : NONE
00001B24                          1566  ; MODIFIES : NONE
00001B24                          1567  ; ------------------------------------------------------------------------------
00001B24  48E7 C080               1568              MOVEM.L D0-D1/A0,-(A7)
00001B28                          1569              
00001B28                          1570              ;JSR     FONPLOT
00001B28                          1571              
00001B28  4281                    1572              CLR.L   D1
00001B2A  103C 0051               1573              MOVE.B  #81,D0
00001B2E  4E4F                    1574              TRAP    #15
00001B30                          1575              
00001B30  41F9 00001B5E           1576              LEA     .TXT1,A0
00001B36  103C 000A               1577              MOVE.B  #10,D0
00001B3A  4EB8 119E               1578              JSR     UTLPRINT
00001B3E                          1579              
00001B3E  0839 0004 000021B5      1580              BTST.B  #4,(SCRCYCCT)
00001B46  6700 0010               1581              BEQ     .DONE
00001B4A                          1582              
00001B4A  41F9 00001B70           1583              LEA     .TXT2,A0
00001B50  103C 0019               1584              MOVE.B  #25,D0
00001B54  4EB8 119E               1585              JSR     UTLPRINT
00001B58                          1586              
00001B58  4CDF 0103               1587  .DONE       MOVEM.L (A7)+,D0-D1/A0
00001B5C                          1588  
00001B5C  4E75                    1589              RTS
00001B5E                          1590              
00001B5E= 53 4E 41 4B 45 20 ...   1591  .TXT1       DC.B    'SNAKE TIMER 68000',0
00001B70= 50 52 45 53 53 20 ...   1592  .TXT2       DC.B    'PRESS TO START',0
00001B80                          1593              DS.W    0
00001B80                          1594  
00001B80                          1595  
00001B80                          1596  
00001B80                          1597  
00001B80                          1598  
00001B80                          1599  
00001B80                          1600  
00001B80                          1601  
00001B80                          1602  
00001B80                          1603  
00001B80                          1604  
00001B80                          1605  
00001B80                          1606  
00001B80                          1607  
00001B80                          1608  
00001B80                          1609  -------------------- end include --------------------
00001B80                          1610              INCLUDE 'INSTRUCTIONS.X68'
00001B80                          1611  ; ==============================================================================
00001B80                          1612  ; INSTRUCTIONS SCREEN
00001B80                          1613  ; ==============================================================================
00001B80                          1614  
00001B80                          1615  ; ------------------------------------------------------------------------------
00001B80                          1616  INSINIT
00001B80                          1617  ; INSTRUCTIONS SCREEN INIT
00001B80                          1618  ; INPUT    : NONE
00001B80                          1619  ; OUTPUT   : NONE
00001B80                          1620  ; MODIFIES : NONE
00001B80                          1621  ; ------------------------------------------------------------------------------
00001B80                          1622  
00001B80  4279 00001EA2           1623              CLR.W   (INSTIMER)
00001B86                          1624              ;INSMAXTM
00001B86                          1625  
00001B86  4E75                    1626              RTS
00001B88                          1627  
00001B88                          1628  ; ------------------------------------------------------------------------------
00001B88                          1629  INSUPD
00001B88                          1630  ; INSTRUCTIONS SCREEN UPDATE
00001B88                          1631  ; INPUT    : NONE
00001B88                          1632  ; OUTPUT   : NONE
00001B88                          1633  ; MODIFIES : NONE
00001B88                          1634  ; ------------------------------------------------------------------------------
00001B88                          1635  
00001B88  5279 00001EA2           1636              ADDQ.W  #1,(INSTIMER)
00001B8E  0C79 01F4 00001EA2      1637              CMP.W   #INSMAXTM,(INSTIMER)
00001B96  6D00 0008               1638              BLT     .DONE
00001B9A  4279 00001EA8           1639              CLR.W   (STANEXT)
00001BA0                          1640  .DONE
00001BA0  4E75                    1641              RTS
00001BA2                          1642  
00001BA2                          1643  ; ------------------------------------------------------------------------------
00001BA2                          1644  INSPLOT
00001BA2                          1645  ; INSTRUCTIONS SCREEN PLOT
00001BA2                          1646  ; INPUT    : NONE
00001BA2                          1647  ; OUTPUT   : NONE
00001BA2                          1648  ; MODIFIES : NONE
00001BA2                          1649  ; ------------------------------------------------------------------------------
00001BA2                          1650  
00001BA2  48E7 C0C0               1651              MOVEM.L D0-D1/A0-A1,-(A7)
00001BA6                          1652              
00001BA6                          1653              ;JSR     FONPLOT
00001BA6                          1654              
00001BA6  103C 000B               1655              MOVE.B  #11,D0
00001BAA  43F9 00001D24           1656              LEA     .TXTLST,A1
00001BB0  2219                    1657  .LOOP       MOVE.L  (A1)+,D1
00001BB2  6700 000A               1658              BEQ     .DONE
00001BB6  2041                    1659              MOVE.L  D1,A0
00001BB8  4EB8 119E               1660              JSR     UTLPRINT
00001BBC  60F2                    1661              BRA     .LOOP
00001BBE                          1662              
00001BBE  4CDF 0303               1663  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
00001BC2  4E75                    1664              RTS
00001BC4= 57 45 4C 43 4F 4D ...   1665  .TXT1       DC.B    'WELCOME TO THE GAME OF SNAKE TIMER 68000!',0
00001BEE= 59 4F 55 52 20 47 ...   1666  .TXT2       DC.B    'YOUR GOAL IN THIS GAME IS TO EAT AS MUCH APPLES AS THE TIMER ALLOWS YOU',0
00001C36= 45 41 43 48 20 41 ...   1667  .TXT3       DC.B    'EACH APPLE EATEN INCREASES THE TIME YOU CAN PLAY',0
00001C67= 54 4F 20 54 48 49 ...   1668  .TXT4       DC.B    'TO THIS END, MOVE THE SNAKE WITH THE ARROWS',0
00001C93= 48 4F 57 20 54 4F ...   1669  .TXT5       DC.B    'HOW TO DO IT? YOU MAY ASK.',0
00001CAE= 49 54 20 49 53 20 ...   1670  .TXT6       DC.B    'IT IS EASY: JUST USE THE UP, DOWN, LEFT, RIGHT KEYS TO MOVE THE SNAKE',0
00001CF4= 42 45 20 43 41 52 ...   1671  .TXT7       DC.B    'BE CAREFUL WITH THE WALLS! TRY NOT TO HIT THEM.',0
00001D24= 00001BC4 00001BEE ...   1672  .TXTLST     DC.L    .TXT1,.TXT2,.TXT3,.TXT4,.TXT5,.TXT6,.TXT7,0
00001D44                          1673  
00001D44                          1674  
00001D44                          1675  
00001D44                          1676  
00001D44                          1677  
00001D44                          1678  
00001D44                          1679  
00001D44                          1680  
00001D44                          1681  
00001D44                          1682  
00001D44                          1683  
00001D44                          1684  
00001D44                          1685  
00001D44                          1686  
00001D44                          1687  -------------------- end include --------------------
00001D44                          1688              INCLUDE 'GAMEOVER.X68'
00001D44                          1689  ; ==============================================================================
00001D44                          1690  ; GAME OVER SCREEN
00001D44                          1691  ; ==============================================================================
00001D44                          1692  
00001D44                          1693  ; ------------------------------------------------------------------------------
00001D44                          1694  GOVINIT
00001D44                          1695  ; GAME OVER SCREEN INIT
00001D44                          1696  ; INPUT    : NONE
00001D44                          1697  ; OUTPUT   : NONE
00001D44                          1698  ; MODIFIES : NONE
00001D44                          1699  ; ------------------------------------------------------------------------------
00001D44                          1700  
00001D44  4279 00001EA4           1701              CLR.W  (GOVTIMER)
00001D4A  4E75                    1702              RTS
00001D4C                          1703  
00001D4C                          1704  ; ------------------------------------------------------------------------------
00001D4C                          1705  GOVUPD
00001D4C                          1706  ; GAME OVER SCREEN UPDATE
00001D4C                          1707  ; INPUT    : NONE
00001D4C                          1708  ; OUTPUT   : NONE
00001D4C                          1709  ; MODIFIES : NONE
00001D4C                          1710  ; ------------------------------------------------------------------------------
00001D4C                          1711  
00001D4C  5279 00001EA4           1712              ADDQ.W  #1,(GOVTIMER)
00001D52  0C79 01F4 00001EA4      1713              CMP.W   #500,(GOVTIMER)
00001D5A  6D00 0008               1714              BLT     .DONE
00001D5E  4279 00001EA8           1715              CLR.W   (STANEXT)
00001D64                          1716  .DONE
00001D64  4E75                    1717              RTS
00001D66                          1718              
00001D66                          1719  ; ------------------------------------------------------------------------------
00001D66                          1720  GOVPLOT
00001D66                          1721  ; GAME OVER SCREEN PLOT
00001D66                          1722  ; INPUT    : NONE
00001D66                          1723  ; OUTPUT   : NONE
00001D66                          1724  ; MODIFIES : NONE
00001D66                          1725  ; ------------------------------------------------------------------------------
00001D66  48E7 C080               1726              MOVEM.L D0-D1/A0,-(A7)
00001D6A                          1727              
00001D6A                          1728              ;JSR     FONPLOT
00001D6A                          1729              
00001D6A  4281                    1730              CLR.L   D1
00001D6C  103C 0051               1731              MOVE.B  #81,D0
00001D70  4E4F                    1732              TRAP    #15
00001D72                          1733              
00001D72  41F9 00001D94           1734              LEA     .TXT1,A0
00001D78  103C 000A               1735              MOVE.B  #10,D0
00001D7C  4EB8 119E               1736              JSR     UTLPRINT
00001D80                          1737              
00001D80  41F9 00001D9E           1738              LEA     .TXT2,A0
00001D86  103C 0014               1739              MOVE.B  #20,D0
00001D8A  4EB8 119E               1740              JSR     UTLPRINT
00001D8E                          1741              
00001D8E  4CDF 0103               1742  .DONE       MOVEM.L (A7)+,D0-D1/A0
00001D92                          1743  
00001D92  4E75                    1744              RTS
00001D94= 47 41 4D 45 20 4F ...   1745  .TXT1       DC.B    'GAME OVER',0
00001D9E= 57 41 49 54 20 54 ...   1746  .TXT2       DC.B    'WAIT TO RETURN TO MAIN PAGE',0
00001DBA                          1747              DS.W    0
00001DBA                          1748  
00001DBA                          1749  
00001DBA                          1750  
00001DBA                          1751  
00001DBA                          1752  
00001DBA                          1753  
00001DBA                          1754  
00001DBA                          1755  
00001DBA                          1756  
00001DBA                          1757  
00001DBA                          1758  
00001DBA                          1759  
00001DBA                          1760  
00001DBA                          1761  
00001DBA                          1762  
00001DBA                          1763  
00001DBA                          1764  
00001DBA                          1765  -------------------- end include --------------------
00001DBA                          1766              INCLUDE 'STATES.X68'
00001DBA                          1767  ; =============================================================================
00001DBA                          1768  ; GAME STATE MANAGEMENT
00001DBA                          1769  ; =============================================================================
00001DBA                          1770  
00001DBA                          1771  ; -----------------------------------------------------------------------------
00001DBA                          1772  STAINIT
00001DBA                          1773  ; INITALIZES THE STATE MANAGER
00001DBA                          1774  ; INPUT    - NONE
00001DBA                          1775  ; OUTPUT   - NONE
00001DBA                          1776  ; MODIFIES - NONE
00001DBA                          1777  ; -----------------------------------------------------------------------------
00001DBA  33FC FFFF 00001EA6      1778              MOVE.W  #STANONE,(STACUR)
00001DC2  4279 00001EA8           1779              CLR.W   (STANEXT)
00001DC8  4E75                    1780              RTS
00001DCA                          1781  
00001DCA                          1782  ; -----------------------------------------------------------------------------
00001DCA                          1783  STAUPD
00001DCA                          1784  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001DCA                          1785  ; INPUT    - NONE
00001DCA                          1786  ; OUTPUT   - NONE
00001DCA                          1787  ; MODIFIES - NONE
00001DCA                          1788  ; -----------------------------------------------------------------------------
00001DCA  48E7 8080               1789              MOVEM.L D0/A0,-(A7)
00001DCE                          1790              
00001DCE  4280                    1791              CLR.L   D0
00001DD0  3039 00001EA8           1792              MOVE.W  (STANEXT),D0
00001DD6  B079 00001EA6           1793              CMP.W   (STACUR),D0
00001DDC  6700 0012               1794              BEQ     .DOUPD
00001DE0  33C0 00001EA6           1795              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00001DE6  E588                    1796              LSL.L   #2,D0
00001DE8  2040                    1797              MOVE.L  D0,A0
00001DEA  2068 1E08               1798              MOVE.L  .INITBL(A0),A0
00001DEE  4E90                    1799              JSR     (A0)
00001DF0  4280                    1800  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001DF2  3039 00001EA6           1801              MOVE.W  (STACUR),D0
00001DF8  E588                    1802              LSL.L   #2,D0
00001DFA  2040                    1803              MOVE.L  D0,A0
00001DFC  2068 1E18               1804              MOVE.L  .UPDTBL(A0),A0
00001E00  4E90                    1805              JSR     (A0)
00001E02                          1806              
00001E02  4CDF 0101               1807              MOVEM.L (A7)+,D0/A0
00001E06  4E75                    1808              RTS
00001E08= 00001AA8 00001B80 ...   1809  .INITBL     DC.L    ISCINIT,INSINIT,GAMINIT,GOVINIT
00001E18= 00001AB0 00001B88 ...   1810  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMUPD,GOVUPD
00001E28                          1811  
00001E28                          1812  ; -----------------------------------------------------------------------------
00001E28                          1813  STAPLOT
00001E28                          1814  ; PERFORMS STATE PLOT
00001E28                          1815  ; INPUT    - NONE
00001E28                          1816  ; OUTPUT   - NONE
00001E28                          1817  ; MODIFIES - NONE
00001E28                          1818  ; -----------------------------------------------------------------------------
00001E28  48E7 8080               1819              MOVEM.L D0/A0,-(A7)
00001E2C  4280                    1820              CLR.L   D0
00001E2E  3039 00001EA6           1821              MOVE.W  (STACUR),D0
00001E34  E588                    1822              LSL.L   #2,D0
00001E36  2040                    1823              MOVE.L  D0,A0
00001E38  2068 1E44               1824              MOVE.L  .PLTTBL(A0),A0
00001E3C  4E90                    1825              JSR     (A0)
00001E3E  4CDF 0101               1826              MOVEM.L (A7)+,D0/A0
00001E42  4E75                    1827              RTS
00001E44= 00001B24 00001BA2 ...   1828  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMPLOT,GOVPLOT
00001E54                          1829  
00001E54                          1830  ; -----------------------------------------------------------------------------
00001E54                          1831  STAEMPTY
00001E54                          1832  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
00001E54                          1833  ; INPUT    - NONE
00001E54                          1834  ; OUTPUT   - NONE
00001E54                          1835  ; MODIFIES - NONE
00001E54                          1836  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
00001E54                          1837  ; -----------------------------------------------------------------------------
00001E54  4E75                    1838              RTS
00001E56                          1839  
00001E56                          1840  
00001E56                          1841  
00001E56                          1842  
00001E56                          1843  
00001E56                          1844  
00001E56                          1845  
00001E56                          1846  
00001E56                          1847  
00001E56                          1848  
00001E56                          1849  
00001E56                          1850  
00001E56                          1851  -------------------- end include --------------------
00001E56                          1852              
00001E56                          1853  START:
00001E56                          1854                  
00001E56                          1855  ; --- INIZIALIZACIÓN ---------------------------------------------------------
00001E56                          1856  
00001E56  007C 0700               1857              ORI.W   #$0700,SR
00001E5A  4EB8 1000               1858              JSR     SYSINIT
00001E5E  4EB8 1188               1859              JSR     UTLINIT
00001E62                          1860              ;JSR     GAMINIT
00001E62  4EB8 1DBA               1861              JSR     STAINIT
00001E66                          1862  
00001E66                          1863  
00001E66                          1864  .LOOP
00001E66                          1865  
00001E66                          1866  ; --- ACTUALIZAR -------------------------------------------------------------
00001E66                          1867  
00001E66                          1868  ; LEER DISPOSITIVOS DE ENTRADA
00001E66                          1869  
00001E66  4E41                    1870              TRAP    #KBDUPTN
00001E68                          1871  
00001E68                          1872  ; ACTUALIZAR LÓGICA DEL JUEGO
00001E68                          1873              ;JSR     GAMUPD
00001E68  4EB8 1DCA               1874              JSR     STAUPD
00001E6C                          1875              
00001E6C                          1876  ; --- SINCRONIZACIÓN ---------------------------------------------------------
00001E6C                          1877              
00001E6C  4A39 000021B4           1878  .WINT       TST.B   (SCRINTCT)
00001E72  67F8                    1879              BEQ     .WINT   
00001E74  4239 000021B4           1880              CLR.B   (SCRINTCT)         
00001E7A                          1881  
00001E7A                          1882  
00001E7A                          1883  ; --- DIBUJAR ----------------------------------------------------------------
00001E7A                          1884              
00001E7A                          1885              ;JSR     GAMPLOT
00001E7A  4EB8 1E28               1886              JSR     STAPLOT
00001E7E                          1887              
00001E7E                          1888              
00001E7E  4E40                    1889              TRAP    #SCRUPTN                      ; ACTUALIZA DOBLE BUFFER
00001E80                          1890  
00001E80                          1891  
00001E80  60E4                    1892              BRA     .LOOP
00001E82                          1893  
00001E82  FFFF FFFF               1894              SIMHALT
00001E86                          1895  
00001E86                          1896              INCLUDE 'VARS.X68'
00001E86                          1897  ; ----------------------------------------------------------------------------
00001E86                          1898  ; VARIABLES DEL JUEGO
00001E86                          1899  ; ----------------------------------------------------------------------------
00001E86                          1900  
00001E86                          1901  ; --- VARIABLES DE LA MANZANA ------------------------------------------------
00001E86                          1902  
00001E86                          1903  MNZPOSX     DS.W    1                       ; COORDENADA X DE LA MANZANA
00001E88                          1904  MNZPOSY     DS.W    1                       ; COORDENADA Y DE LA MANZANA
00001E8A                          1905  
00001E8A                          1906  ; --- VARIABLES DE LA SERPIENTE ----------------------------------------------
00001E8A                          1907  
00001E8A                          1908  CBZPOSX     DS.W    1                       ; COORDENADA X CABEZA
00001E8C                          1909  CBZPOSY     DS.W    1                       ; COORDENADA Y CABEZA
00001E8E                          1910  CBZVELX     DS.W    1                       ; VELOCIDAD X CABEZA
00001E90                          1911  CBZVELY     DS.W    1                       ; VELOCIDAD Y CABEZA
00001E92                          1912  COLPOSX     DS.W    1                       ; COORDENADA X COLA
00001E94                          1913  COLPOSY     DS.W    1                       ; COORDENADA Y COLA
00001E96                          1914  SGMPOSX     DS.W    1                       ; COORDENADA X SEGMENTO
00001E98                          1915  SGMPOSY     DS.W    1                       ; COORDENADA Y SEGMENTO
00001E9A                          1916  SGMPOSX2    DS.W    1                       ; COORDENADA X SEGMENTO 2
00001E9C                          1917  SGMPOSY2    DS.W    1                       ; COORDENADA Y SEGMENTO 2
00001E9E                          1918  
00001E9E                          1919  ; --- VARIABLES DEL MARCADOR -------------------------------------------------
00001E9E                          1920  
00001E9E                          1921  JGOPNTS     DS.W    1                       ; PUNTUACIÓN DEL JUEGO
00001EA0                          1922  
00001EA0                          1923  ; --- INTRO STATE RELATED VARIABLES ------------------------------------------
00001EA0                          1924  
00001EA0                          1925  ISCTIMER    DS.W    1                       ; INTRO TIMER
00001EA2                          1926  
00001EA2                          1927  ; --- INSTRUCTIONS  STATE RELATED VARIABLES ----------------------------------
00001EA2                          1928  INSTIMER    DS.W    1                       ;INTRUCTIONS TIMER
00001EA4                          1929  
00001EA4                          1930  ; -- GAME OVER STATE RELATED VARIABLES ---------------------------------------
00001EA4                          1931  
00001EA4                          1932  GOVTIMER    DS.W    1
00001EA6                          1933  
00001EA6                          1934  ; --- VARIABLES RELACIONADAS CON LOS ESTADOS ---------------------------------
00001EA6                          1935  
00001EA6                          1936  STACUR      DS.W    1                       ; ESTADO ACTUAL
00001EA8                          1937  STANEXT     DS.W    1                       ; ESTADO SIGUIENTE
00001EAA                          1938  
00001EAA                          1939  
00001EAA                          1940  
00001EAA                          1941  
00001EAA                          1942  
00001EAA                          1943  
00001EAA                          1944  
00001EAA                          1945  
00001EAA                          1946  
00001EAA                          1947  
00001EAA                          1948  
00001EAA                          1949  
00001EAA                          1950  
00001EAA                          1951  
00001EAA                          1952  
00001EAA                          1953  
00001EAA                          1954  
00001EAA                          1955  
00001EAA                          1956  
00001EAA                          1957  
00001EAA                          1958  
00001EAA                          1959  -------------------- end include --------------------
00001EAA                          1960              INCLUDE 'LIB/UTLVARS.X68'
00001EAA                          1961  ; =============================================================================
00001EAA                          1962  ; UTILITY VARIABLES
00001EAA                          1963  ; =============================================================================
00001EAA                          1964  
00001EAA                          1965  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00001EAC                          1966              DS.W    0
00001EAC                          1967  -------------------- end include --------------------
00001EAC                          1968              INCLUDE 'SYSVARS.X68'
00001EAC                          1969  ; ----------------------------------------------------------------------------
00001EAC                          1970  ; VARIABLES DEL SISTEMA
00001EAC                          1971  ; ----------------------------------------------------------------------------
00001EAC                          1972  
00001EAC                          1973  ; --- VARIABLES DE LA MATRIZ -------------------------------------------------
00001EAC                          1974  
00001EAC                          1975  ESTDCLDS    DS.B    TCELDAS                 ; ESTADO DE LAS CELDAS 0=VACÍO  1=COLA   2=SEGMENTO  TRZPLOT=CABEZA  4?=MANZANA    
000021AC                          1976  ESTDCBZ     DS.B    1                       ; 0= DERECHA, 1=ARRIBA, 2=IZQUIERDA, 3=ABAJO
000021AD                          1977  
000021AD                          1978  ; --- VARIABLES DE TECLADO ---------------------------------------------------
000021AD                          1979  
000021AD                          1980  KBDVAL      DS.B    1
000021AE                          1981  KBDEDGE     DS.B    1                       ; KEY EDGE
000021B0                          1982  LASTKEY     DS.L    1                       
000021B4                          1983  
000021B4                          1984  ;--- TIMED INTERRUPT RELATED VARIABLES ---------------------------------------
000021B4                          1985              
000021B4                          1986  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
000021B5                          1987  SCRCYCCT    DS.B    1                       ;CYCLE COUNTER
000021B6                          1988              DS.W    0
000021B6                          1989  
000021B6                          1990  
000021B6                          1991  
000021B6                          1992  
000021B6                          1993  
000021B6                          1994  
000021B6                          1995  
000021B6                          1996  
000021B6                          1997  
000021B6                          1998  
000021B6                          1999  
000021B6                          2000  
000021B6                          2001  
000021B6                          2002  
000021B6                          2003  
000021B6                          2004  -------------------- end include --------------------
000021B6                          2005      
000021B6                          2006      
000021B6                          2007              END    START        

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
APPLEINIT           1632
APPLEPLOT           16A2
APPLEUPD            1664
ARR                 1162
CBZFCOL             AA00
CBZHEIGH            14
CBZOCPD             18B6
CBZPCOL             FF00
CBZPOSX             1E8A
CBZPOSY             1E8C
CBZVEL              14
CBZVELX             1E8E
CBZVELY             1E90
CBZWIDTH            14
CHCKUPDT            167C
CHECK               163E
CHECKCLD            1960
CHKBORDE            1380
CHKCOL              13AC
CINDMTRZ            187C
CLDFREE             1978
CLNCLDS             17F8
CNVICOOR            1924
COLFCOL             AA00
COLFND              90EE90
COLHEIGH            A
COLOCPD             18F8
COLPCOL             FF00
COLPOSX             1E92
COLPOSY             1E94
COLWIDTH            A
CONTINU             1182
DER                 1156
DIVX                1884
DIVY                1898
DONEPLOT            1A7E
DWN                 117A
ENDDIVX             1894
ENDDIVY             18A8
ENDMULTX            1948
ENDMULTY            195A
ESTDCBZ             21AC
ESTDCLDS            1EAC
FIN                 1408
FINUPD              15EC
FONPLOT             197E
GAMEOVER            13FA
GAMINIT             17A8
GAMPLOT             17D2
GAMUPD              17C2
GENPOSMNZ           1720
GOVINIT             1D44
GOVPLOT             1D66
GOVPLOT:DONE        1D8E
GOVPLOT:TXT1        1D94
GOVPLOT:TXT2        1D9E
GOVTIMER            1EA4
GOVUPD              1D4C
GOVUPD:DONE         1D64
HEADINIT            12EE
HEADPLOT            140E
HEADUPD             130E
INSINIT             1B80
INSMAXTM            1F4
INSPLOT             1BA2
INSPLOT:DONE        1BBE
INSPLOT:LOOP        1BB0
INSPLOT:TXT1        1BC4
INSPLOT:TXT2        1BEE
INSPLOT:TXT3        1C36
INSPLOT:TXT4        1C67
INSPLOT:TXT5        1C93
INSPLOT:TXT6        1CAE
INSPLOT:TXT7        1CF4
INSPLOT:TXTLST      1D24
INSTIMER            1EA2
INSUPD              1B88
INSUPD:DONE         1BA0
ISCINIT             1AA8
ISCMAXTM            1F4
ISCPLOT             1B24
ISCPLOT:DONE        1B58
ISCPLOT:TXT1        1B5E
ISCPLOT:TXT2        1B70
ISCTIMER            1EA0
ISCUPD              1AB0
ISCUPD:CONT         1B04
ISCUPD:DONE         1B1E
ISCUPD:MAINLOOP     1ABE
IZQ                 116E
JGOPNTS             1E9E
KBDDOWN             28
KBDEDGE             21AE
KBDINIT             1106
KBDLEFT             25
KBDRIGHT            27
KBDUP               26
KBDUPD              1114
KBDUPTN             1
KBDVAL              21AD
LASTKEY             21B0
LNGINI              1
MARKMNZ             1656
MAXSGM              1
MCLDVCIA            18CC
MNZFCOL             FF
MNZHEIGH            14
MNZOCPD             190E
MNZPCOL             AAFF
MNZPOSX             1E86
MNZPOSY             1E88
MNZWIDTH            14
MTZINIT             17EA
MTZPLOT             1A3A
MTZUPD              19BC
MTZUPD:CLNCLDS      19CA
MULTLOOPX           193A
MULTLOOPY           194C
NEWMNZ              1694
NOCOL               13DE
NUMCLMNS            20
NUMFILAS            18
OJOFCOL             FFFFFF
OJOHEIGH            A
OJOPCOL             0
OJOWIDTH            A
PANHEIGH            1E0
PANWIDTH            280
PLOTAPPLE           1AA2
PLOTCBZ             1A8A
PLOTCLDS            1A54
PLOTCOL             1A96
PLOTSEG             1A9C
PLOTVAC             1A90
PNTSFCOL            0
PNTSTEXT            65
SCOINIT             1752
SCOPLOT             1774
SCOPLOT:TXT1        179E
SCOUPD              175A
SCRCYCCT            21B5
SCRFPS              32
SCRINIT             109A
SCRINTCT            21B4
SCRINTN             1
SCRPLOT             10EC
SCRTIM              10DE
SCRUPTN             0
SEGINIT             1492
SEGPLOT             1552
SEGUPD              14C0
SGMFCOL             AA00
SGMHEIGH            14
SGMOCPD             18E2
SGMPCOL             FF00
SGMPOSX             1E96
SGMPOSX2            1E9A
SGMPOSY             1E98
SGMPOSY2            1E9C
SGMWIDTH            14
SIGABA              1378
SIGARR              1360
SIGDER              1354
SIGIZQ              136C
SIZECLDA            14
SNDEAT              0
SNDGMOV             1
SNDINIT             103A
SNDINIT:DONE        1058
SNDINIT:LOOP        1046
SNDINIT:SNDEAT      105E
SNDINIT:SNDGMOV     106A
SNDINIT:SNDLIST     107C
SNDPLAY             1088
SNDPLTN             2
STACUR              1EA6
STAEMPTY            1E54
STAINIT             1DBA
STANEXT             1EA8
STANONE             FFFFFFFF
STAPLOT             1E28
STAPLOT:PLTTBL      1E44
START               1E56
START:LOOP          1E66
START:WINT          1E6C
STAUPD              1DCA
STAUPD:DOUPD        1DF0
STAUPD:INITBL       1E08
STAUPD:UPDTBL       1E18
SYSINIT             1000
TAILINIT            1592
TAILPLOT            15F2
TAILUPD             15A4
TCELDAS             300
UTLCHRWD            8
UTLINIT             1188
UTLPRINT            119E
UTLPRINT:ENDLOOP    11B0
UTLPRINT:LOOP       11A6
UTLRAND             11D0
UTLRAND:RANDVEC     11EE
UTLRNDIX            1EAA
